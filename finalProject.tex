% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\title{Stat 410 Aidan's Movies}
\author{Aidan Gerber}
\date{4/29/2022}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Stat 410 Aidan's Movies},
  pdfauthor={Aidan Gerber},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{setspace}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\begin{document}
\maketitle

{
\setcounter{tocdepth}{3}
\tableofcontents
}
\doublespacing

\hypertarget{project-statement}{%
\section{Project statement}\label{project-statement}}

\hypertarget{what-is-the-purpose-of-your-analysis-what-effect-are-you-investigating-why}{%
\paragraph{What is the purpose of your analysis? What effect are you
investigating?
Why?}\label{what-is-the-purpose-of-your-analysis-what-effect-are-you-investigating-why}}

The purpose of my analysis is to determine what movies I will enjoy the
most. I will do this by creating a model with the response variable of
how much I liked a movie out of 100 and predicting it with data on
various movie reviews, genres, cast and crew, and more. I am doing this
so that I can figure out which movies I will want to watch because I can
be confident that I will enjoy them.

\hypertarget{data-description}{%
\section{Data description}\label{data-description}}

\hypertarget{how-were-the-data-collected-how-do-these-data-help-you-answer-the-relevant-research-questions}{%
\paragraph{How were the data collected? How do these data help you
answer the relevant research
questions?}\label{how-were-the-data-collected-how-do-these-data-help-you-answer-the-relevant-research-questions}}

The data was collected over time by me. A partial dataset in json form
is available on my website here:
\url{https://www.tradethisandthat.com/movies/api/all_movies/}. In the
references there is python code I wrote to turn the mySQL database into
a csv. Data from TMDB was collected using their open API. Data from IMDB
was collected by web scraping their page for awards and finding any
Oscars as well as scraping their page for rating distributions. Much of
the data is gotten with python code that I run on movie addition with
Django. My rating and metacritic ratings are collected by me.

\hypertarget{exploratory-data-analysis}{%
\section{Exploratory data analysis}\label{exploratory-data-analysis}}

\hypertarget{what-are-the-basic-features-of-the-data-what-are-the-variables-how-are-the-variables-related-are-there-any-unusual-patterns}{%
\paragraph{What are the basic features of the data? What are the
variables? How are the variables related? Are there any unusual
patterns?}\label{what-are-the-basic-features-of-the-data-what-are-the-variables-how-are-the-variables-related-are-there-any-unusual-patterns}}

None of the variables are too highly related to my rating. The highest
correlations are to imdb\_rating, tmdb\_rating. The other variables
above 0.6 correlation are variables that are highly correlated with
imdb\_rating like imdb\_arithmetic\_mean, imdb\_us\_rating,
imdb\_top\_1000\_rating, and imdb\_not\_us\_rating. Something important
to note is that most variables in the dataset make sense linearly such
as my\_rating and imdb\_rating. Since my\_rating is on a 0 to 100 scale,
in an MLR setting other variables within a specific range work best if
they are not transformed such as IMDB rating, between 0 to 10, TMDB
rating between 0 to 10, or Metacritic rating between 0 and 100. When
attempting to use uncapped data, they were insignificant. This is
evident when looking at IMDB count vs IMDB Top 1000 Count. When using a
log transformation, the full IMDB count becomes more significant which
makes sense since it includes more data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{movies\_to\_print }\OtherTok{=}\NormalTok{ movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(name, my\_rating, imdb\_rating, metacritic\_rating, tmdb\_rating, imdb\_count, tmdb\_count, release\_date, revenue, budget, award\_count, franchise\_name, mpaa\_name, genres\_names, production\_company\_names)}
\NormalTok{movies\_to\_print }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 586 x 15
##    name            my_rating imdb_rating metacritic_rati~ tmdb_rating imdb_count
##    <chr>               <dbl>       <dbl>            <dbl>       <dbl>      <dbl>
##  1 101 Dalmatians         56         5.7               49         5.9     109975
##  2 12 Angry Men           96         9                 96         8.5     760712
##  3 12 Years a Sla~        76         8.1               96         7.9     684042
##  4 2001: A Space ~        61         8.3               84         8.1     649596
##  5 21                     36         6.8               64         6.7     246029
##  6 21 Jump Street         84         7.2               69         6.9     544820
##  7 3 Idiots               87         8.4               67         8       384266
##  8 300                    35         7.6               52         7.2     800537
##  9 A Bug's Life           40         7.2               77         7       285675
## 10 A Call to Spy          42         6.6               65         6.8       6472
## # ... with 576 more rows, and 9 more variables: tmdb_count <dbl>,
## #   release_date <date>, revenue <dbl>, budget <dbl>, award_count <dbl>,
## #   franchise_name <chr>, mpaa_name <chr>, genres_names <chr>,
## #   production_company_names <chr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{imdb\_mlr }\OtherTok{=} \FunctionTok{lm}\NormalTok{(metacritic\_rating }\SpecialCharTok{\textasciitilde{}}\NormalTok{ imdb\_rating }\SpecialCharTok{+}\NormalTok{ award\_count }\SpecialCharTok{+}\NormalTok{ imdb\_top\_1000\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies\_no\_na) }\CommentTok{\# creating a basic MLR to interpolate metacritic ratings from imdb ratings}

\NormalTok{movies}\SpecialCharTok{$}\NormalTok{mpaa\_name }\OtherTok{=} \FunctionTok{as.numeric}\NormalTok{(}\FunctionTok{as.factor}\NormalTok{(movies}\SpecialCharTok{$}\NormalTok{mpaa\_name)) }\CommentTok{\# turning mpaa\_name into a factor so that it can be used for levels.}

\NormalTok{batch\_credit\_filter }\OtherTok{=} \ControlFlowTok{function}\NormalTok{(movie\_ids, person\_id\_param) \{}
  \CommentTok{\# function to create dummy variables of whether a person with a specific id appears in a movie}
\NormalTok{  results }\OtherTok{=} \FunctionTok{c}\NormalTok{()}
  \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{length}\NormalTok{(movie\_ids)) \{}
\NormalTok{    creds }\OtherTok{=}\NormalTok{ credits }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(movie\_id}\SpecialCharTok{==}\NormalTok{movie\_ids[i])}
\NormalTok{    results }\OtherTok{=} \FunctionTok{append}\NormalTok{(results, }\FunctionTok{ifelse}\NormalTok{(person\_id\_param }\SpecialCharTok{\%in\%}\NormalTok{ creds}\SpecialCharTok{$}\NormalTok{person\_id, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{))}
\NormalTok{  \}}
\NormalTok{  results}
\NormalTok{\}}

\NormalTok{continuous\_movies }\OtherTok{=}\NormalTok{ movies }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# main dplyr code to create the tbl}
  \FunctionTok{arrange}\NormalTok{(imdb\_rating) }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# since Metacritic ratings have the highest correlation to IMDB ratings}
  \FunctionTok{select}\NormalTok{(uuid,name,my\_rating, imdb\_rating, tmdb\_rating, tmdb\_count, metacritic\_rating, budget, revenue, runtime, award\_count, imdb\_count, imdb\_arithmetic\_mean, imdb\_median, imdb\_top\_1000\_rating, imdb\_top\_1000\_count, imdb\_us\_rating, imdb\_us\_count, imdb\_not\_us\_rating, imdb\_not\_us\_count,genres\_names,mpaa\_name,imdb\_rating\_percentile,tmdb\_rating\_percentile,metacritic\_rating\_percentile) }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# selecting useful continuous columns}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{metacritic\_rating =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(metacritic\_rating), }\FunctionTok{predict}\NormalTok{(imdb\_mlr,}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{imdb\_rating=}\NormalTok{imdb\_rating, }\AttributeTok{award\_count=}\NormalTok{award\_count,}\AttributeTok{imdb\_top\_1000\_rating=}\NormalTok{imdb\_top\_1000\_rating)), metacritic\_rating)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{( }\CommentTok{\# interpolating NA metacritic values}
    \AttributeTok{is\_action =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Action\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{), }\CommentTok{\# creating dummy variables for different genres}
    \AttributeTok{is\_comedy =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Comedy\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_adventure =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Adventure\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_animation =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Animation\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_family =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Family\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_drama =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Drama\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_scifi =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Science Fiction\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_thriller =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Thriller\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_brad\_pitt =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}Laq4vXpGTZpfFFqDcHs5KV\textquotesingle{}}\NormalTok{), }\CommentTok{\# creating dummy variables for crew members to test significance}
    \AttributeTok{is\_stan\_lee =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}QzvrSM5wqckocFLj3AEZaV\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_christopher\_nolan =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}keZ3UQoTZ4XZKb79VUXDgG\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_spielberg =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}naF68ZLuf7v6upwViuNVUm\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_harrison\_ford =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}GTw4tYdeQmWQ6YdgAa3hGu\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_matt\_damon =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}czP9E4RMt6u9sfTTML9eMR\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_wes\_anderson =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}JVxsaqF8Rxzy3CVxzvQWnd\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_tom\_cruise =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}e4Eiprq53YfhZvwmc8SrLr\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_john\_williams =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}DyCbZvFwBgugBpjDaqx8kk\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_rdj =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}Bpb5BiRdou7xQHjbU7GUDv\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_quentin\_tarantino =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}QLKZWkzmAovVDJXZN8eu3v\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_tom\_hanks =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}7tqrqC9rgLHtXckENws9Fy\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_george\_lucas =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}DRdnxAsNAZAp7HYsspMMtz\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_leonardo\_dicaprio =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}FuCDtnxehhqRrKqh9qC7Dj\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_the\_rock =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}VbfEpXpRyzNfjTppSLU9ei\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_stanley\_kubrick =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}PfnG2E5kKDAM2PrrUdW9jk\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_john\_hughes =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}CkytgUXum2syFtLkgy9dyi\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_jim\_carrey =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}T2K6TBzwq2qavcVFeGL8Rc\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_wally\_pfister =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}L8jtAQbm3ynBna4857d5j2\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_henry\_fonda =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}K5qeaJKmMQen8dMEqY75F4\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_morgan\_freeman =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}FHCFi8DwCzoJbCRC34DMRj\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_bong\_joon\_ho =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}VhJUKLUtNBFJsHcSTiAyMy\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_dustin\_hoffman =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}gc7HESshGq5Lh7gD2MH6wR\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_arnold\_schwarz =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}JYP3ANQFwkmsQYPGwj77gk\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_jack\_nicholson =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}VxqAcnJqT6d7vjcHcpXQoL\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_aamir\_khan =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}jWk22meEpdCAhTdpKCfBxg\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_sean\_connery =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}57UUtEPqsvkpCSmeGPraq8\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_brad\_bird =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}AbANa443DEn6zfpidFA73z\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_natalie\_portman =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}JSN7GommYrTooGeh5WzvPg\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_robin\_williams =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}C56iyMS2VJXc6gnW3ezcDC\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_sandra\_bullock =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}efknfaN8AeojtnMGCfzVR8\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_bill\_murray =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}aDeM2LwCunLFnKR4YaziPa\textquotesingle{}}\NormalTok{),}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{genres\_names,}\SpecialCharTok{{-}}\NormalTok{uuid)}
\NormalTok{cor\_matrix }\OtherTok{=}\NormalTok{ continuous\_movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{name) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{cor}\NormalTok{()}\CommentTok{\# creating correlation matrix}
\NormalTok{cor\_matrix[}\DecValTok{1}\NormalTok{,]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                    my_rating                  imdb_rating 
##                  1.000000000                  0.657608684 
##                  tmdb_rating                   tmdb_count 
##                  0.614192677                  0.437103919 
##            metacritic_rating                       budget 
##                  0.509691045                  0.038192224 
##                      revenue                      runtime 
##                  0.167667022                  0.287863417 
##                  award_count                   imdb_count 
##                  0.329820850                  0.510161430 
##         imdb_arithmetic_mean                  imdb_median 
##                  0.634252867                  0.517229746 
##         imdb_top_1000_rating          imdb_top_1000_count 
##                  0.647339420                  0.482491458 
##               imdb_us_rating                imdb_us_count 
##                  0.655470838                  0.494646732 
##           imdb_not_us_rating            imdb_not_us_count 
##                  0.649562081                  0.500003380 
##                    mpaa_name       imdb_rating_percentile 
##                  0.052092101                  0.643730839 
##       tmdb_rating_percentile metacritic_rating_percentile 
##                  0.611130631                  0.504582195 
##                    is_action                    is_comedy 
##                  0.059484957                 -0.187789648 
##                 is_adventure                 is_animation 
##                 -0.064860956                 -0.065148143 
##                    is_family                     is_drama 
##                 -0.151693475                  0.197823706 
##                     is_scifi                  is_thriller 
##                  0.064167770                  0.068301993 
##                 is_brad_pitt                  is_stan_lee 
##                  0.093952319                  0.096389472 
##         is_christopher_nolan                 is_spielberg 
##                  0.147864049                  0.079544469 
##             is_harrison_ford                is_matt_damon 
##                  0.141412621                  0.117606692 
##              is_wes_anderson                is_tom_cruise 
##                  0.092686335                  0.026335233 
##             is_john_williams                       is_rdj 
##                  0.176133532                  0.064942367 
##         is_quentin_tarantino                 is_tom_hanks 
##                  0.050142345                  0.063882501 
##              is_george_lucas         is_leonardo_dicaprio 
##                  0.126677335                  0.075455453 
##                  is_the_rock           is_stanley_kubrick 
##                 -0.020816763                  0.064227775 
##               is_john_hughes                is_jim_carrey 
##                  0.034179508                  0.027645696 
##             is_wally_pfister               is_henry_fonda 
##                  0.148044199                  0.087351607 
##            is_morgan_freeman              is_bong_joon_ho 
##                  0.080671346                  0.060262949 
##            is_dustin_hoffman            is_arnold_schwarz 
##                  0.054668301                  0.030257306 
##            is_jack_nicholson                is_aamir_khan 
##                 -0.005494098                  0.067481758 
##              is_sean_connery                 is_brad_bird 
##                  0.088991757                  0.060264840 
##           is_natalie_portman            is_robin_williams 
##                  0.075279604                  0.057841332 
##            is_sandra_bullock               is_bill_murray 
##                  0.007598355                  0.065182711
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{high\_cor\_cm }\OtherTok{=}\NormalTok{ continuous\_movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(my\_rating,imdb\_rating,tmdb\_rating,imdb\_count,metacritic\_rating,award\_count)}
\end{Highlighting}
\end{Shaded}

This R code creates the main dataset that I am analyzing. The first
thing I did was deciding to interpolate null values rather than removing
than. The only category will null values was Metacritic rating since
some movies are not on Metacritic. To interpolate Metacritic ratings, I
created a basic MLR to predict them from movie characteristics that are
not related to me or my ratings.

The next step was to make mpaa\_name a numeric factor allowing it to be
used as a dummy variable. The most common MPAA ratings for movies that I
have seen are PG-13(209), PG(179), R(135), G(27), and NR(21).

After that, I wrote a function to check if a person of a specific id
appeared in a movie and return 1 or 0. This combined the separate
credits and movies tables. Credits are 1-to-1 related with both movies
and people so I checked those columns.

Finally, it was time to use dplyr to get the dataset. I began by
arranging by IMDB rating since Metacritic ratings are most related to
IMDB ratings. Then, I selected the desired columns from the larger
dataset. After that, I created dummy variables for both genres and crew.
* I chose every genre that I have seen more than 100 movies from. +
Comedy(266) + Adventure(239) + Action(213) + Drama(167) + Family(166) +
Science Fiction(132) + Animation(126) + Thriller(102)

Choosing cast and crew members was more difficult. I selected people
that I thought had the ability to make movies more than the sum of their
parts. I decided to choose many more people than I expected to
significant and have them whittled down through AIC and BIC.

Looking at the correlation matrix of my rating to all the variables in
the final dataset, I noticed that imdb\_rating is most significant.
Barely behind are tmdb\_rating, imdb\_arithmetic\_mean,
imdb\_top\_1000\_rating, imdb\_us\_rating, imdb\_not\_us\_rating,
imdb\_rating\_percentile, and tmdb\_rating\_percentile. None of these
are surprising and each of them are correlated with each other. There
were also reasonably strong correlations between my\_rating and
imdb\_count with less strong ones to award\_count, runtime, and revenue.
In terms of genres, the highest positive correlation was

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{pairs}\NormalTok{(high\_cor\_cm) }\CommentTok{\# graphing pairs of specific values}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\centering
\includegraphics{finalProject_files/figure-latex/unnamed-chunk-5-1.svg}
\caption{Scatterplot pairs of notable continuous variables in the
dataset}
\end{figure}

\hypertarget{data-analysis}{%
\section{Data analysis}\label{data-analysis}}

\hypertarget{what-is-the-statistical-model-or-models-that-you-are-using-why-is-this-an-appropriate-model-to-use-do-the-model-diagnostics-contradict-the-model-assumptions-how-do-you-interpret-the-results-from-the-statistical-analysis-in-the-context-of-your-research-question}{%
\paragraph{What is the statistical model (or models) that you are using?
Why is this an appropriate model to use? Do the model diagnostics
contradict the model assumptions? How do you interpret the results from
the statistical analysis in the context of your research
question?}\label{what-is-the-statistical-model-or-models-that-you-are-using-why-is-this-an-appropriate-model-to-use-do-the-model-diagnostics-contradict-the-model-assumptions-how-do-you-interpret-the-results-from-the-statistical-analysis-in-the-context-of-your-research-question}}

I tried fitting many different models including SLRs, MLRs, polynomials,
montone transformations, ridge, lasso, and GAMs.

\hypertarget{models}{%
\section{Models}\label{models}}

\hypertarget{slr}{%
\subsection{SLR}\label{slr}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# begin with some simple models}
\NormalTok{fit1 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.975  -8.660   2.319  10.025  50.625 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept) -36.1699     4.4286  -8.167 1.96e-15 ***
## imdb_rating  12.9445     0.6136  21.095  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.13 on 584 degrees of freedom
## Multiple R-squared:  0.4324, Adjusted R-squared:  0.4315 
## F-statistic:   445 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit2 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{metacritic\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ metacritic_rating, data = continuous_movies)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -52.37 -10.01   1.52  11.83  38.26 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       15.80834    2.91499   5.423 8.59e-08 ***
## metacritic_rating  0.61262    0.04279  14.316  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 16.14 on 584 degrees of freedom
## Multiple R-squared:  0.2598, Adjusted R-squared:  0.2585 
## F-statistic:   205 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit3 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{tmdb\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ tmdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.043  -8.252   2.349  10.104  40.173 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept) -51.0368     5.7467  -8.881   <2e-16 ***
## tmdb_rating  15.1543     0.8057  18.808   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.8 on 584 degrees of freedom
## Multiple R-squared:  0.3772, Adjusted R-squared:  0.3762 
## F-statistic: 353.7 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit1}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit2}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit3}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"IMDB"}\NormalTok{, }\StringTok{"TMDB"}\NormalTok{,}\StringTok{\textquotesingle{}Metacritic\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-6-1.svg}

\hypertarget{mlr}{%
\subsection{MLR}\label{mlr}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit4 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{+}\NormalTok{metacritic\_rating}\SpecialCharTok{+}\NormalTok{tmdb\_rating,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create an MLR with just movie ratings from other sources}
\FunctionTok{summary}\NormalTok{(fit4)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + metacritic_rating + tmdb_rating, 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.326  -8.704   2.258   9.844  49.695 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       -40.48555    5.79723  -6.984 7.88e-12 ***
## imdb_rating        10.53253    1.55661   6.766 3.23e-11 ***
## metacritic_rating   0.03985    0.05674   0.702    0.483    
## tmdb_rating         2.66900    1.78948   1.491    0.136    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.12 on 582 degrees of freedom
## Multiple R-squared:  0.4352, Adjusted R-squared:  0.4323 
## F-statistic: 149.5 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit5 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create an MLR with all linear terms}
\FunctionTok{summary}\NormalTok{(fit5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ . - name, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -41.881  -8.154   1.378   8.372  51.355 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(>|t|)   
## (Intercept)                   6.418e+00  2.237e+01   0.287  0.77433   
## imdb_rating                   1.688e+00  6.637e+00   0.254  0.79931   
## tmdb_rating                  -6.263e+00  5.267e+00  -1.189  0.23489   
## tmdb_count                   -9.209e-05  3.765e-04  -0.245  0.80688   
## metacritic_rating            -1.867e-01  1.295e-01  -1.442  0.15002   
## budget                       -1.747e-08  1.589e-08  -1.100  0.27205   
## revenue                      -1.436e-09  2.927e-09  -0.490  0.62401   
## runtime                      -3.679e-02  4.214e-02  -0.873  0.38311   
## award_count                  -4.153e-01  3.042e-01  -1.365  0.17270   
## imdb_count                    3.693e-05  1.623e-05   2.276  0.02323 * 
## imdb_arithmetic_mean         -2.288e+00  3.410e+00  -0.671  0.50251   
## imdb_median                  -1.787e-01  8.727e-01  -0.205  0.83786   
## imdb_top_1000_rating          1.790e+00  1.875e+00   0.955  0.34008   
## imdb_top_1000_count           1.889e-02  6.372e-03   2.965  0.00316 **
## imdb_us_rating                6.948e+00  4.351e+00   1.597  0.11095   
## imdb_us_count                -1.267e-04  5.932e-05  -2.136  0.03315 * 
## imdb_not_us_rating            4.190e+00  4.777e+00   0.877  0.38082   
## imdb_not_us_count            -4.886e-05  3.790e-05  -1.289  0.19786   
## mpaa_name                     2.612e-01  6.276e-01   0.416  0.67745   
## imdb_rating_percentile       -1.564e-01  1.141e-01  -1.371  0.17095   
## tmdb_rating_percentile        2.987e-01  1.475e-01   2.025  0.04334 * 
## metacritic_rating_percentile  1.090e-01  6.191e-02   1.760  0.07899 . 
## is_action                     2.840e+00  1.642e+00   1.730  0.08420 . 
## is_comedy                     1.091e+00  1.580e+00   0.690  0.49025   
## is_adventure                 -2.751e+00  1.534e+00  -1.793  0.07351 . 
## is_animation                  1.431e+00  2.656e+00   0.539  0.59023   
## is_family                     3.269e+00  2.376e+00   1.376  0.16945   
## is_drama                      4.133e-01  1.761e+00   0.235  0.81450   
## is_scifi                      1.322e+00  1.673e+00   0.790  0.42970   
## is_thriller                   8.779e-01  1.785e+00   0.492  0.62305   
## is_brad_pitt                  4.318e+00  4.034e+00   1.070  0.28491   
## is_stan_lee                   3.593e+00  3.048e+00   1.179  0.23899   
## is_christopher_nolan          5.361e+00  6.398e+00   0.838  0.40253   
## is_spielberg                 -1.090e+00  3.446e+00  -0.316  0.75200   
## is_harrison_ford              3.944e+00  5.412e+00   0.729  0.46650   
## is_matt_damon                 5.681e+00  4.157e+00   1.367  0.17235   
## is_wes_anderson               7.329e+00  6.880e+00   1.065  0.28724   
## is_tom_cruise                 1.933e+00  4.323e+00   0.447  0.65499   
## is_john_williams              1.013e+01  4.516e+00   2.243  0.02531 * 
## is_rdj                       -5.650e-01  4.649e+00  -0.122  0.90333   
## is_quentin_tarantino         -5.106e+00  5.865e+00  -0.870  0.38443   
## is_tom_hanks                  2.609e+00  4.119e+00   0.633  0.52670   
## is_george_lucas               1.781e+00  5.621e+00   0.317  0.75146   
## is_leonardo_dicaprio          1.055e+00  5.595e+00   0.188  0.85057   
## is_the_rock                   3.416e+00  3.962e+00   0.862  0.38900   
## is_stanley_kubrick            1.951e+00  6.408e+00   0.304  0.76095   
## is_john_hughes                2.951e+00  5.159e+00   0.572  0.56758   
## is_jim_carrey                 7.809e+00  5.203e+00   1.501  0.13396   
## is_wally_pfister              5.665e+00  6.792e+00   0.834  0.40461   
## is_henry_fonda                1.756e+01  1.366e+01   1.286  0.19899   
## is_morgan_freeman            -2.065e+00  4.808e+00  -0.430  0.66770   
## is_bong_joon_ho               5.757e+00  8.088e+00   0.712  0.47690   
## is_dustin_hoffman             9.500e+00  5.612e+00   1.693  0.09108 . 
## is_arnold_schwarz            -5.685e+00  8.090e+00  -0.703  0.48252   
## is_jack_nicholson            -1.476e+01  8.111e+00  -1.820  0.06928 . 
## is_aamir_khan                 2.371e+01  1.403e+01   1.691  0.09151 . 
## is_sean_connery               1.366e+01  8.103e+00   1.685  0.09250 . 
## is_brad_bird                  7.857e+00  6.328e+00   1.242  0.21494   
## is_natalie_portman            2.629e+00  5.006e+00   0.525  0.59976   
## is_robin_williams             1.037e+01  5.239e+00   1.980  0.04826 * 
## is_sandra_bullock             3.728e+00  5.572e+00   0.669  0.50377   
## is_bill_murray                5.583e+00  4.935e+00   1.131  0.25844   
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.25 on 524 degrees of freedom
## Multiple R-squared:  0.5526, Adjusted R-squared:  0.5005 
## F-statistic: 10.61 on 61 and 524 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit6 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_count}\SpecialCharTok{+}\NormalTok{imdb\_top\_1000\_count}\SpecialCharTok{+}\NormalTok{imdb\_us\_count}\SpecialCharTok{+}\NormalTok{imdb\_not\_us\_count,}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit6) }\CommentTok{\# create an MLR with just movie rating counts}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_count + imdb_top_1000_count + imdb_us_count + 
##     imdb_not_us_count, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.720  -9.889   1.807  11.038  43.118 
## 
## Coefficients:
##                       Estimate Std. Error t value Pr(>|t|)    
## (Intercept)          3.725e+01  2.108e+00  17.675  < 2e-16 ***
## imdb_count           4.757e-05  1.162e-05   4.095 4.82e-05 ***
## imdb_top_1000_count  2.468e-02  4.845e-03   5.093 4.76e-07 ***
## imdb_us_count       -1.000e-05  4.480e-05  -0.223   0.8234    
## imdb_not_us_count   -8.532e-05  3.331e-05  -2.561   0.0107 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 15.8 on 581 degrees of freedom
## Multiple R-squared:  0.2944, Adjusted R-squared:  0.2895 
## F-statistic: 60.59 on 4 and 581 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit4}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit5}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit6}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"IMDB+TMDB+Metacritic"}\NormalTok{, }\StringTok{"All"}\NormalTok{,}\StringTok{\textquotesingle{}All Counts\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-7-1.svg}
\#\# Transformed and Polynomial MLRs

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit7 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(my\_rating)}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# MLR with full model to sqrt of my rating}
\FunctionTok{summary}\NormalTok{(fit7)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = sqrt(my_rating) ~ . - name, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.8407 -0.5095  0.1454  0.6056  3.9915 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(>|t|)   
## (Intercept)                   3.353e+00  1.695e+00   1.978  0.04841 * 
## imdb_rating                   5.560e-01  5.028e-01   1.106  0.26928   
## tmdb_rating                  -7.435e-01  3.990e-01  -1.864  0.06294 . 
## tmdb_count                   -1.024e-05  2.853e-05  -0.359  0.71973   
## metacritic_rating            -1.458e-02  9.813e-03  -1.486  0.13792   
## budget                       -1.186e-09  1.204e-09  -0.986  0.32482   
## revenue                      -4.278e-11  2.218e-10  -0.193  0.84709   
## runtime                      -2.128e-03  3.192e-03  -0.667  0.50535   
## award_count                  -3.046e-02  2.304e-02  -1.322  0.18675   
## imdb_count                    2.406e-06  1.229e-06   1.958  0.05078 . 
## imdb_arithmetic_mean         -2.659e-01  2.583e-01  -1.029  0.30379   
## imdb_median                  -4.245e-03  6.611e-02  -0.064  0.94883   
## imdb_top_1000_rating          1.327e-01  1.420e-01   0.935  0.35045   
## imdb_top_1000_count           1.531e-03  4.827e-04   3.171  0.00161 **
## imdb_us_rating                5.424e-01  3.296e-01   1.645  0.10047   
## imdb_us_count                -9.192e-06  4.493e-06  -2.046  0.04128 * 
## imdb_not_us_rating            2.895e-01  3.619e-01   0.800  0.42405   
## imdb_not_us_count            -3.273e-06  2.871e-06  -1.140  0.25473   
## mpaa_name                     1.894e-02  4.754e-02   0.398  0.69046   
## imdb_rating_percentile       -2.235e-02  8.641e-03  -2.587  0.00995 **
## tmdb_rating_percentile        2.926e-02  1.117e-02   2.618  0.00909 **
## metacritic_rating_percentile  7.776e-03  4.690e-03   1.658  0.09792 . 
## is_action                     2.064e-01  1.244e-01   1.659  0.09765 . 
## is_comedy                     5.186e-02  1.197e-01   0.433  0.66505   
## is_adventure                 -2.185e-01  1.162e-01  -1.880  0.06067 . 
## is_animation                  1.211e-01  2.012e-01   0.602  0.54760   
## is_family                     2.445e-01  1.800e-01   1.358  0.17493   
## is_drama                      1.508e-02  1.334e-01   0.113  0.91000   
## is_scifi                      9.787e-02  1.267e-01   0.772  0.44025   
## is_thriller                   7.312e-02  1.352e-01   0.541  0.58890   
## is_brad_pitt                  3.188e-01  3.056e-01   1.043  0.29732   
## is_stan_lee                   2.609e-01  2.309e-01   1.130  0.25900   
## is_christopher_nolan          4.147e-01  4.847e-01   0.856  0.39259   
## is_spielberg                 -8.074e-02  2.610e-01  -0.309  0.75723   
## is_harrison_ford              2.389e-01  4.100e-01   0.583  0.56025   
## is_matt_damon                 3.650e-01  3.149e-01   1.159  0.24705   
## is_wes_anderson               5.662e-01  5.212e-01   1.086  0.27779   
## is_tom_cruise                 1.565e-01  3.275e-01   0.478  0.63299   
## is_john_williams              6.487e-01  3.421e-01   1.896  0.05845 . 
## is_rdj                       -1.184e-02  3.522e-01  -0.034  0.97321   
## is_quentin_tarantino         -3.294e-01  4.443e-01  -0.741  0.45875   
## is_tom_hanks                  1.787e-01  3.120e-01   0.573  0.56716   
## is_george_lucas               1.235e-01  4.258e-01   0.290  0.77186   
## is_leonardo_dicaprio          1.099e-01  4.239e-01   0.259  0.79548   
## is_the_rock                   2.350e-01  3.002e-01   0.783  0.43400   
## is_stanley_kubrick            1.301e-01  4.854e-01   0.268  0.78877   
## is_john_hughes                2.323e-01  3.908e-01   0.594  0.55251   
## is_jim_carrey                 5.674e-01  3.941e-01   1.440  0.15058   
## is_wally_pfister              3.609e-01  5.145e-01   0.701  0.48333   
## is_henry_fonda                7.873e-01  1.034e+00   0.761  0.44697   
## is_morgan_freeman            -2.518e-01  3.642e-01  -0.691  0.48968   
## is_bong_joon_ho               3.681e-01  6.127e-01   0.601  0.54825   
## is_dustin_hoffman             6.196e-01  4.251e-01   1.457  0.14561   
## is_arnold_schwarz            -4.388e-01  6.128e-01  -0.716  0.47431   
## is_jack_nicholson            -9.427e-01  6.144e-01  -1.534  0.12556   
## is_aamir_khan                 1.469e+00  1.063e+00   1.382  0.16749   
## is_sean_connery               8.199e-01  6.138e-01   1.336  0.18221   
## is_brad_bird                  5.077e-01  4.794e-01   1.059  0.29003   
## is_natalie_portman            1.896e-01  3.792e-01   0.500  0.61731   
## is_robin_williams             7.056e-01  3.968e-01   1.778  0.07599 . 
## is_sandra_bullock             2.445e-01  4.221e-01   0.579  0.56269   
## is_bill_murray                2.808e-01  3.739e-01   0.751  0.45292   
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.003 on 524 degrees of freedom
## Multiple R-squared:  0.5311, Adjusted R-squared:  0.4766 
## F-statistic: 9.731 on 61 and 524 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit8 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{log}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{imdb\_rating,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# simple model with my\_rating to imdb\_rating and log(imdb\_count)}
\FunctionTok{summary}\NormalTok{(fit8)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ log(imdb_count) + imdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.555  -8.591   1.701   9.537  51.826 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(>|t|)    
## (Intercept)     -55.8570     5.3204 -10.499  < 2e-16 ***
## log(imdb_count)   2.7418     0.4381   6.258 7.57e-10 ***
## imdb_rating      11.0089     0.6702  16.427  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.69 on 583 degrees of freedom
## Multiple R-squared:  0.4682, Adjusted R-squared:  0.4663 
## F-statistic: 256.6 on 2 and 583 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit9 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{+}\FunctionTok{I}\NormalTok{(imdb\_rating}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{)}\SpecialCharTok{+}\FunctionTok{I}\NormalTok{(imdb\_rating}\SpecialCharTok{\^{}}\DecValTok{3}\NormalTok{),}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting a cubic model with imdb\_rating}
\FunctionTok{summary}\NormalTok{(fit9)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + I(imdb_rating^2) + I(imdb_rating^3), 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.486  -8.483   2.207   9.741  48.700 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(>|t|)
## (Intercept)       48.9929    71.1087   0.689    0.491
## imdb_rating      -24.2463    33.8272  -0.717    0.474
## I(imdb_rating^2)   5.2690     5.2629   1.001    0.317
## I(imdb_rating^3)  -0.2430     0.2679  -0.907    0.365
## 
## Residual standard error: 14.13 on 582 degrees of freedom
## Multiple R-squared:  0.4347, Adjusted R-squared:  0.4318 
## F-statistic: 149.2 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit10 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(my\_rating)}\SpecialCharTok{\textasciitilde{}}\FunctionTok{sqrt}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{sqrt}\NormalTok{(imdb\_rating), }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting with sqrts}
\FunctionTok{summary}\NormalTok{(fit10)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = sqrt(my_rating) ~ sqrt(imdb_count) + sqrt(imdb_rating), 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.9775 -0.5516  0.1587  0.6845  3.7046 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       -3.8029151  0.7059644  -5.387 1.04e-07 ***
## sqrt(imdb_count)   0.0009896  0.0001805   5.484 6.20e-08 ***
## sqrt(imdb_rating)  3.9885846  0.2842290  14.033  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.026 on 583 degrees of freedom
## Multiple R-squared:  0.4544, Adjusted R-squared:  0.4525 
## F-statistic: 242.8 on 2 and 583 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit11 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating }\SpecialCharTok{\textasciitilde{}} \FunctionTok{polym}\NormalTok{(imdb\_rating, imdb\_count,award\_count, }\AttributeTok{degree=}\DecValTok{5}\NormalTok{, }\AttributeTok{raw=}\ConstantTok{TRUE}\NormalTok{),}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting with a very big polynomial}
\CommentTok{\# summary(fit11)}

\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit7}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit8}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit9}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit10}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{col=}\StringTok{"navajowhite"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit11}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{col=}\StringTok{"royalblue"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"SQRT\textasciitilde{}All"}\NormalTok{, }\StringTok{"IMDB+log(imdb\_count)"}\NormalTok{,}\StringTok{\textquotesingle{}IMDB\^{}3\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}SQRT\textasciitilde{}SQRT\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}polym\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}navajowhite\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}royalblue\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-8-1.svg}

\hypertarget{ridge-and-lasso}{%
\subsection{Ridge and Lasso}\label{ridge-and-lasso}}

Create data matrix to be used for both ridge and lasso.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{X }\OtherTok{=} \FunctionTok{model.matrix}\NormalTok{(}\SpecialCharTok{\textasciitilde{}} \SpecialCharTok{{-}}\DecValTok{1} \SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(imdb\_count) }\SpecialCharTok{+}\NormalTok{ imdb\_rating }\SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(award\_count), }\AttributeTok{data =}\NormalTok{ continuous\_movies) }\CommentTok{\# model to use for ridge and lasso fits}
\NormalTok{y }\OtherTok{=}\NormalTok{ continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating}
\NormalTok{fit\_lm }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating }\SpecialCharTok{\textasciitilde{}} \FunctionTok{sqrt}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{ imdb\_rating }\SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(award\_count), }\AttributeTok{data =}\NormalTok{ continuous\_movies) }\CommentTok{\# non{-}ridge and lasso to compare to}
\end{Highlighting}
\end{Shaded}

\hypertarget{ridge}{%
\subsubsection{Ridge}\label{ridge}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_ridge }\OtherTok{=} \FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{) }\CommentTok{\# ridge fit}
\NormalTok{fit.cv.ridge }\OtherTok{=} \FunctionTok{cv.glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{)}
\FunctionTok{plot}\NormalTok{(fit.cv.ridge)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-11-1.svg}

\hypertarget{lasso}{%
\subsubsection{Lasso}\label{lasso}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_lasso }\OtherTok{=} \FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{) }\CommentTok{\# lasso fit}
\NormalTok{fit.cv.lasso }\OtherTok{=} \FunctionTok{cv.glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{)}
\FunctionTok{plot}\NormalTok{(fit.cv.lasso)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-12-1.svg}

\hypertarget{comparison}{%
\subsubsection{Comparison}\label{comparison}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{beta\_hat\_mlr }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit\_lm)}
\NormalTok{beta\_hat\_ridge }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit.cv.ridge, }\AttributeTok{s =} \StringTok{"lambda.1se"}\NormalTok{)}
\NormalTok{beta\_hat\_lasso }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit.cv.lasso, }\AttributeTok{s =} \StringTok{"lambda.1se"}\NormalTok{)}
\FunctionTok{cbind}\NormalTok{(beta\_hat\_mlr, beta\_hat\_ridge, beta\_hat\_lasso)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 4 x 3 sparse Matrix of class "dgCMatrix"
##                   beta_hat_mlr         s1           s1
## (Intercept)       -24.83846628 3.53534323 -8.363625498
## sqrt(imdb_count)    0.01507946 0.01297789  0.009043295
## imdb_rating        10.20844225 6.25614967  8.363468039
## sqrt(award_count)  -0.05764352 1.50753433  .
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,}\FunctionTok{predict}\NormalTok{(}\FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{),}\FunctionTok{as.matrix}\NormalTok{(X),}\AttributeTok{s=}\NormalTok{fit.cv.ridge}\SpecialCharTok{$}\NormalTok{lambda}\FloatTok{.1}\NormalTok{se),}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,}\FunctionTok{predict}\NormalTok{(}\FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{),}\FunctionTok{as.matrix}\NormalTok{(X),}\AttributeTok{s=}\NormalTok{fit.cv.lasso}\SpecialCharTok{$}\NormalTok{lambda}\FloatTok{.1}\NormalTok{se),}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_lm}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"Ridge"}\NormalTok{, }\StringTok{"Lasso"}\NormalTok{, }\StringTok{"MLR"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-13-1.svg}

\begin{itemize}
\tightlist
\item
  Adjusted R Squared at 1 standard deviation for ridge and lasso:

  \begin{itemize}
  \tightlist
  \item
    ridge: 0.4658365
  \item
    lasso: 0.4671242
  \item
    mlr: 0.4644028 Lasso and ridge result in a slight improvement over
    the MLR since they take advantage of the bias variance tradeoff.
    Looking at the beta values, the different models change the
    coefficients a lot despite getting similar results. MLR values IMDB
    count and IMDB rating much more than ridge or lasso. Lasso actually
    removes sqrt(award\_count) to not much of a detriment.
  \end{itemize}
\end{itemize}

\hypertarget{steps-with-aic-and-bic}{%
\subsection{Steps with AIC and BIC}\label{steps-with-aic-and-bic}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(leaps) }\CommentTok{\# procedure from lab}
\NormalTok{fit\_full }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(tmdb\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_us\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_not\_us\_count), }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# start by creating a full and add some log terms for values not bounded to a specific range}
\NormalTok{fit\_null }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\DecValTok{1}\NormalTok{, }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create a null fit to just an intercept}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{anova}\NormalTok{(fit\_null,fit\_full,}\AttributeTok{test=}\StringTok{\textquotesingle{}F\textquotesingle{}}\NormalTok{) }\CommentTok{\# make sure that the full fit is more significant than the null fit}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Analysis of Variance Table
## 
## Model 1: my_rating ~ 1
## Model 2: my_rating ~ (name + imdb_rating + tmdb_rating + tmdb_count + 
##     metacritic_rating + budget + revenue + runtime + award_count + 
##     imdb_count + imdb_arithmetic_mean + imdb_median + imdb_top_1000_rating + 
##     imdb_top_1000_count + imdb_us_rating + imdb_us_count + imdb_not_us_rating + 
##     imdb_not_us_count + mpaa_name + imdb_rating_percentile + 
##     tmdb_rating_percentile + metacritic_rating_percentile + is_action + 
##     is_comedy + is_adventure + is_animation + is_family + is_drama + 
##     is_scifi + is_thriller + is_brad_pitt + is_stan_lee + is_christopher_nolan + 
##     is_spielberg + is_harrison_ford + is_matt_damon + is_wes_anderson + 
##     is_tom_cruise + is_john_williams + is_rdj + is_quentin_tarantino + 
##     is_tom_hanks + is_george_lucas + is_leonardo_dicaprio + is_the_rock + 
##     is_stanley_kubrick + is_john_hughes + is_jim_carrey + is_wally_pfister + 
##     is_henry_fonda + is_morgan_freeman + is_bong_joon_ho + is_dustin_hoffman + 
##     is_arnold_schwarz + is_jack_nicholson + is_aamir_khan + is_sean_connery + 
##     is_brad_bird + is_natalie_portman + is_robin_williams + is_sandra_bullock + 
##     is_bill_murray) - name + log(imdb_count) + log(tmdb_count) + 
##     log(imdb_us_count) + log(imdb_not_us_count)
##   Res.Df    RSS Df Sum of Sq     F    Pr(>F)    
## 1    585 205512                                 
## 2    520  90585 65    114927 10.15 < 2.2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

Because the p-value for the ful model is significant in comparison to
the null model, it makes sense to continue with AIC and BIC to find a
significant model. The use of AIC and BIC is to penalize adding more
parameters because any parameter improves the fit.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_aic }\OtherTok{=} \FunctionTok{step}\NormalTok{(fit\_null,}\FunctionTok{list}\NormalTok{(}\AttributeTok{upper=}\NormalTok{fit\_full),}\AttributeTok{direction=}\StringTok{\textquotesingle{}forward\textquotesingle{}}\NormalTok{) }\CommentTok{\# run AIC}
\NormalTok{n }\OtherTok{=} \FunctionTok{nrow}\NormalTok{(continuous\_movies)}
\NormalTok{fit\_bic }\OtherTok{=} \FunctionTok{step}\NormalTok{(fit\_null,}\FunctionTok{list}\NormalTok{(}\AttributeTok{upper=}\NormalTok{fit\_full),}\AttributeTok{direction=}\StringTok{\textquotesingle{}forward\textquotesingle{}}\NormalTok{,}\AttributeTok{k=}\FunctionTok{log}\NormalTok{(n)) }\CommentTok{\# run BIC}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit\_aic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + log(imdb_count) + is_john_williams + 
##     tmdb_rating_percentile + is_robin_williams + is_bill_murray + 
##     is_sean_connery + is_jack_nicholson + is_christopher_nolan + 
##     is_stan_lee + is_comedy + is_matt_damon + imdb_us_rating + 
##     is_dustin_hoffman + is_action + is_adventure + is_family + 
##     is_henry_fonda + is_aamir_khan + imdb_not_us_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -43.208  -8.048   0.963   8.901  51.492 
## 
## Coefficients:
##                         Estimate Std. Error t value Pr(>|t|)    
## (Intercept)            -36.54690    8.02058  -4.557 6.37e-06 ***
## imdb_rating             -5.03237    5.51677  -0.912 0.362055    
## log(imdb_count)          2.18695    0.45396   4.817 1.87e-06 ***
## is_john_williams        11.04011    2.89969   3.807 0.000156 ***
## tmdb_rating_percentile   0.11880    0.04087   2.907 0.003793 ** 
## is_robin_williams       10.74979    5.07432   2.118 0.034571 *  
## is_bill_murray          10.04111    3.87296   2.593 0.009771 ** 
## is_sean_connery         16.23032    7.74485   2.096 0.036560 *  
## is_jack_nicholson      -14.80868    7.67276  -1.930 0.054103 .  
## is_christopher_nolan     9.18126    4.34181   2.115 0.034900 *  
## is_stan_lee              4.44786    2.38016   1.869 0.062179 .  
## is_comedy                2.03353    1.33940   1.518 0.129514    
## is_matt_damon            7.14619    3.89592   1.834 0.067139 .  
## imdb_us_rating           7.19509    3.22451   2.231 0.026048 *  
## is_dustin_hoffman        7.94873    5.42923   1.464 0.143733    
## is_action                3.48623    1.43060   2.437 0.015122 *  
## is_adventure            -3.04652    1.35713  -2.245 0.025166 *  
## is_family                3.13360    1.53023   2.048 0.041041 *  
## is_henry_fonda          19.83960   13.23803   1.499 0.134515    
## is_aamir_khan           20.41390   13.39043   1.525 0.127940    
## imdb_not_us_rating       5.85220    3.93296   1.488 0.137312    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.15 on 565 degrees of freedom
## Multiple R-squared:  0.5249, Adjusted R-squared:  0.5081 
## F-statistic: 31.21 on 20 and 565 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit\_bic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + log(imdb_count) + is_john_williams, 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.988  -8.279   1.523   9.610  51.665 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(>|t|)    
## (Intercept)      -53.7527     5.3313 -10.083  < 2e-16 ***
## imdb_rating       10.9580     0.6659  16.456  < 2e-16 ***
## log(imdb_count)    2.5708     0.4389   5.857 7.89e-09 ***
## is_john_williams   8.5850     2.8724   2.989  0.00292 ** 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.6 on 582 degrees of freedom
## Multiple R-squared:  0.4762, Adjusted R-squared:  0.4735 
## F-statistic: 176.4 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{AIC}\NormalTok{(fit\_bic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 4727.974
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit\_aic}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_bic}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"AIC"}\NormalTok{, }\StringTok{"BIC"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-17-1.svg}

\hypertarget{general-additive-models}{%
\subsection{General Additive Models}\label{general-additive-models}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(mgcv)}
\end{Highlighting}
\end{Shaded}

\hypertarget{large-gam}{%
\subsubsection{Large GAM}\label{large-gam}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam1 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{s}\NormalTok{(imdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(metacritic\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(tmdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(award\_count)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(runtime),}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ s(imdb_rating) + s(metacritic_rating) + s(tmdb_rating) + 
##     s(imdb_count) + s(award_count) + s(runtime)
## 
## Parametric coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  56.4343     0.5606   100.7   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                        edf Ref.df      F  p-value    
## s(imdb_rating)       1.000  1.000 24.029 1.23e-06 ***
## s(metacritic_rating) 3.051  3.893  1.081    0.318    
## s(tmdb_rating)       2.196  2.822  1.156    0.332    
## s(imdb_count)        3.066  3.836  8.186 3.31e-06 ***
## s(award_count)       1.621  2.015  0.613    0.535    
## s(runtime)           2.471  3.199  1.637    0.195    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## R-sq.(adj) =  0.476   Deviance explained = 48.8%
## GCV = 188.82  Scale est. = 184.17    n = 586
\end{verbatim}

\hypertarget{gam-with-transformations-and-extra-terms}{%
\subsubsection{GAM with Transformations and Extra
Terms}\label{gam-with-transformations-and-extra-terms}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam2 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{s}\NormalTok{(imdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(metacritic\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(tmdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(imdb\_count))}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(award\_count))}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(runtime)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(budget)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_arithmetic\_mean),}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ s(imdb_rating) + s(metacritic_rating) + s(tmdb_rating) + 
##     s(sqrt(imdb_count)) + s(sqrt(award_count)) + s(runtime) + 
##     s(budget) + s(imdb_arithmetic_mean)
## 
## Parametric coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  56.4343     0.5538   101.9   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                           edf Ref.df      F  p-value    
## s(imdb_rating)          1.000  1.000 10.144  0.00153 ** 
## s(metacritic_rating)    3.146  4.013  1.241  0.29384    
## s(tmdb_rating)          2.612  3.342  1.489  0.18652    
## s(sqrt(imdb_count))     1.000  1.000 19.511 1.19e-05 ***
## s(sqrt(award_count))    2.597  3.143  0.883  0.45300    
## s(runtime)              2.551  3.302  1.410  0.26940    
## s(budget)               4.788  5.851  1.875  0.09210 .  
## s(imdb_arithmetic_mean) 1.000  1.000  0.546  0.46017    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## R-sq.(adj) =  0.488   Deviance explained = 50.5%
## GCV =    186  Scale est. = 179.74    n = 586
\end{verbatim}

\hypertarget{gam-with-genre-interactions-to-imdb-rating-and-revenue}{%
\subsubsection{GAM with Genre Interactions to IMDB Rating and
Revenue}\label{gam-with-genre-interactions-to-imdb-rating-and-revenue}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam3 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_animation}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_family }\SpecialCharTok{+}\NormalTok{ imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_adventure }\SpecialCharTok{+}\NormalTok{ imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_action}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_drama}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_comedy}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_thriller}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_scifi}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{mpaa\_name}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_animation}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_action}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_drama}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_comedy}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_thriller}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_scifi,}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ imdb_rating * is_animation + imdb_rating * is_family + 
##     imdb_rating * is_adventure + imdb_rating * is_action + imdb_rating * 
##     is_drama + imdb_rating * is_comedy + imdb_rating * is_thriller + 
##     imdb_rating * is_scifi + s(imdb_count) + imdb_rating * mpaa_name + 
##     revenue * is_animation + revenue * is_action + revenue * 
##     is_drama + revenue * is_comedy + revenue * is_thriller + 
##     revenue * is_scifi
## 
## Parametric coefficients:
##                            Estimate Std. Error t value Pr(>|t|)    
## (Intercept)               4.705e-02  1.032e-03  45.577  < 2e-16 ***
## imdb_rating               3.437e-01  7.540e-03  45.577  < 2e-16 ***
## is_animation              4.759e-03  1.044e-04  45.577  < 2e-16 ***
## is_family                 6.716e-03  1.474e-04  45.577  < 2e-16 ***
## is_adventure              9.811e-03  2.153e-04  45.577  < 2e-16 ***
## is_action                 1.447e-02  3.176e-04  45.577  < 2e-16 ***
## is_drama                  1.966e-02  4.313e-04  45.577  < 2e-16 ***
## is_comedy                 1.836e-02  4.028e-04  45.577  < 2e-16 ***
## is_thriller               1.051e-02  2.307e-04  45.577  < 2e-16 ***
## is_scifi                  1.010e-02  2.216e-04  45.577  < 2e-16 ***
## mpaa_name                 2.136e-01  4.686e-03  45.577  < 2e-16 ***
## revenue                   2.050e-08  6.325e-09   3.241  0.00126 ** 
## imdb_rating:is_animation  3.333e-02  7.314e-04  45.577  < 2e-16 ***
## imdb_rating:is_family     4.502e-02  9.878e-04  45.577  < 2e-16 ***
## imdb_rating:is_adventure  6.712e-02  1.473e-03  45.577  < 2e-16 ***
## imdb_rating:is_action     1.017e-01  2.232e-03  45.577  < 2e-16 ***
## imdb_rating:is_drama      1.503e-01  3.297e-03  45.577  < 2e-16 ***
## imdb_rating:is_comedy     1.265e-01  2.776e-03  45.577  < 2e-16 ***
## imdb_rating:is_thriller   7.726e-02  1.695e-03  45.577  < 2e-16 ***
## imdb_rating:is_scifi      7.084e-02  1.554e-03  45.577  < 2e-16 ***
## imdb_rating:mpaa_name     1.561e+00  3.426e-02  45.577  < 2e-16 ***
## is_animation:revenue      1.662e-08  6.052e-09   2.745  0.00623 ** 
## is_action:revenue        -9.210e-09  5.256e-09  -1.752  0.08023 .  
## is_drama:revenue          7.182e-09  5.984e-09   1.200  0.23056    
## is_comedy:revenue        -2.528e-09  5.225e-09  -0.484  0.62866    
## is_thriller:revenue      -5.431e-09  5.659e-09  -0.960  0.33764    
## is_scifi:revenue          6.822e-10  4.677e-09   0.146  0.88408    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                     edf    Ref.df        F p-value    
## s(imdb_count) 6.391e-05 6.391e-05 32503749  <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Rank: 8/36
## R-sq.(adj) =  -0.067   Deviance explained = -7.02%
## GCV = 385.77  Scale est. = 380.5     n = 586
\end{verbatim}

\hypertarget{comparison-1}{%
\subsubsection{Comparison}\label{comparison-1}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit\_gam1}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_gam2}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_gam3}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"GAM 1"}\NormalTok{, }\StringTok{"GAM 2"}\NormalTok{, }\StringTok{"GAM 3"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{finalProject_files/figure-latex/unnamed-chunk-22-1.svg}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(fit\_gam1)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(fit\_gam2)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(fit\_gam3)}
\end{Highlighting}
\end{Shaded}

The fit plots have been withheld for spacing reasons. For the first gam:
IMDB rating and metacritic rating are linear. TMDB rating is linear
until the rating reaches about 6 before increase in slope between 6.5
and 7.5 before flattening. This means that the impact of an increase in
TMDB rating from 7.5 to 7.6 is expected to have a larger impact on my
rating than an increase from 6.4 to 6.5. IMDB count has a very steep
slope until it reaches around 500,000 before flattening out. This impact
is fixed by using a log transformation Finally, runtime actually flips.
When runtime is under an hour, an increase in runtime leads to an
expected increase in my rating. However, as runtime passes 150 minutes,
a higher runtime means an expected decrease in my rating.

For the second gam: All terms are linear except for TMDB rating,
runtime, and budget TMDB rating and runtime have already been discussed.
IMDB arithmetic rating is a new addition to this model and actually has
a negative beta model. This exemplifies the slight difference in the way
the public IMDB rating is calculated vs the arithmetic mean. The public
IMDB rating is calculated using a secret formula to prevent review
bombing and is actually a weighted average. This reveals that using the
weighted mean is more powerful than the arithmetic mean and that the
weighted average used by IMDB is useful.

For budget, there is a quick slope upward at the beginning revealing
that a percentage increase in budget is more important that a dollar
amount increase. However, this should be taken with a grain of salt as
there are flaws to using budget as a prediction metric. Firstly, movies
have been made at all different times and budgets are not normalized for
inflation. This harms the predictive power of using budget. Moreover,
some movies do not have public budget information which is related to
their popularity. The mean IMDB count for a movie with a budget that is
not 0 is \ensuremath{4.3154913\times 10^{5}} while for movies with a
budget that is 0 the mean count is \ensuremath{3.8796132\times 10^{4}},
more than 10 times smaller.

\hypertarget{summary-and-discussion}{%
\section{Summary and discussion}\label{summary-and-discussion}}

\hypertarget{what-are-the-main-conclusions-of-your-analysis-what-are-the-main-limitations-what-might-be-investigated-in-future-research}{%
\paragraph{What are the main conclusions of your analysis? What are the
main limitations? What might be investigated in future
research?}\label{what-are-the-main-conclusions-of-your-analysis-what-are-the-main-limitations-what-might-be-investigated-in-future-research}}

The main conclusions of my analysis

\hypertarget{references}{%
\section{References}\label{references}}

\hypertarget{what-are-the-sources-for-the-data-and-any-additional-statistical-resources-that-you-used-to-support-your-analysis}{%
\paragraph{What are the sources for the data and any additional
statistical resources that you used to support your
analysis?}\label{what-are-the-sources-for-the-data-and-any-additional-statistical-resources-that-you-used-to-support-your-analysis}}

\begin{itemize}
\tightlist
\item
  Data sources:

  \begin{itemize}
  \tightlist
  \item
    \href{TMDB\%20API}{https://www.themoviedb.org/documentation/api}
  \item
    \href{IMDB\%20Website}{https://www.imdb.com/}
  \item
    \href{Personal\%20Movie\%20Website}{https://www.tradethisandthat.com/movies/}
  \end{itemize}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{from}\NormalTok{ django.core.management.base }\ImportTok{import}\NormalTok{ BaseCommand}
\ImportTok{from}\NormalTok{ movies.models }\ImportTok{import} \OperatorTok{*}
\ImportTok{import}\NormalTok{ csv, os}


\KeywordTok{class}\NormalTok{ Command(BaseCommand):}
    \BuiltInTok{help} \OperatorTok{=} \StringTok{\textquotesingle{}create full database from csv\textquotesingle{}}

    \KeywordTok{def}\NormalTok{ handle(}\VariableTok{self}\NormalTok{, }\OperatorTok{*}\NormalTok{args, }\OperatorTok{**}\NormalTok{options):}
\NormalTok{        FOLDER }\OperatorTok{=}\NormalTok{ os.path.dirname(os.path.abspath(}\VariableTok{\_\_file\_\_}\NormalTok{))}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/movie.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}franchise\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mpaa\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}metacritic\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_id\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}poster\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}runtime\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_date\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}recent\_watch\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}viewing\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_day\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_month\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_year\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}revenue\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}budget\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}distance\_from\_rating\_average\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_rating\_percentile\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}tmdb\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}metacritic\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genre\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}award\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}award\_count\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}production\_company\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}franchise\_name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mpaa\_name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genres\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genre\_numbers\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}award\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}production\_company\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_arithmetic\_mean\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_median\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_top\_1000\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_top\_1000\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_us\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_us\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_not\_us\_rating\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_not\_us\_count\textquotesingle{}}\NormalTok{]}
\NormalTok{            )}
\NormalTok{            genres }\OperatorTok{=}\NormalTok{ WatchInfo.objects.}\BuiltInTok{filter}\NormalTok{(watch\_info\_type}\OperatorTok{=}\StringTok{\textquotesingle{}Genre\textquotesingle{}}\NormalTok{)}
\NormalTok{            genre\_dict }\OperatorTok{=}\NormalTok{ \{genre: i }\ControlFlowTok{for}\NormalTok{ i, genre }\KeywordTok{in} \BuiltInTok{enumerate}\NormalTok{(genres)\}}
            \ControlFlowTok{for}\NormalTok{ movie }\KeywordTok{in}\NormalTok{ Movie.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [movie.uuid, (movie.franchise\_id }\ControlFlowTok{if}\NormalTok{ movie.franchise }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     (movie.mpaa\_rating\_id }\ControlFlowTok{if}\NormalTok{ movie.mpaa\_rating }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{), movie.imdb\_rating,}
\NormalTok{                     movie.metacritic\_rating, movie.my\_rating\_field, movie.tmdb\_id, movie.imdb\_id, movie.name,}
\NormalTok{                     movie.tmdb\_rating, movie.tmdb\_count, movie.poster, movie.runtime, movie.release\_date,}
\NormalTok{                     movie.recent\_watch, movie.viewing\_count, movie.release\_day.name, movie.release\_month.name,}
\NormalTok{                     movie.release\_year.name, movie.revenue, movie.budget, movie.distance\_from\_rating\_average,}
\NormalTok{                     movie.rating\_percentile, movie.imdb\_rating\_percentile, movie.tmdb\_rating\_percentile,}
\NormalTok{                     movie.metacritic\_rating\_percentile,}
\NormalTok{                     [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()], [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.awards.}\BuiltInTok{all}\NormalTok{()], movie.award\_count,}
\NormalTok{                     [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.production\_companies.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     (movie.franchise.name }\ControlFlowTok{if}\NormalTok{ movie.franchise }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     (movie.mpaa\_rating.name }\ControlFlowTok{if}\NormalTok{ movie.mpaa\_rating }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()], [genre\_dict[x] }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.awards.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.production\_companies.}\BuiltInTok{all}\NormalTok{()], movie.imdb\_count, movie.imdb\_arithmetic\_mean,}
\NormalTok{                     movie.imdb\_median, movie.imdb\_top\_1000\_rating, movie.imdb\_top\_1000\_count, movie.imdb\_us\_rating,}
\NormalTok{                     movie.imdb\_us\_count, movie.imdb\_not\_us\_rating, movie.imdb\_not\_us\_count}
\NormalTok{                     ]}
\NormalTok{                )}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/place.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow([}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}city\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}state\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}country\textquotesingle{}}\NormalTok{])}
            \ControlFlowTok{for}\NormalTok{ place }\KeywordTok{in}\NormalTok{ Place.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow([place.uuid, place.city, place.state, place.country])}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/person.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}main\_role\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}birth\_place\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}image\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}number\_of\_movies\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}total\_rating\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}credit\_weighted\_score\textquotesingle{}}\NormalTok{]}
\NormalTok{            )}
            \ControlFlowTok{for}\NormalTok{ person }\KeywordTok{in}\NormalTok{ Person.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow([person.uuid, person.tmdb\_id, person.name, person.main\_role,}
\NormalTok{                                     (person.birth\_place\_id }\ControlFlowTok{if}\NormalTok{ person.birth\_place }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{), person.image,}
\NormalTok{                                     person.number\_of\_movies\_field, person.total\_rating\_field,}
\NormalTok{                                     person.credit\_order\_weighted\_score\_field])}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/watch\_info.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}type\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}category\_average\textquotesingle{}}\NormalTok{, ]}
\NormalTok{            )}
            \ControlFlowTok{for}\NormalTok{ watch\_info }\KeywordTok{in}\NormalTok{ WatchInfo.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [watch\_info.uuid, watch\_info.name, watch\_info.watch\_info\_type, watch\_info.movie\_count,}
\NormalTok{                     watch\_info.category\_average])}
            \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/viewing.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                      encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{                filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_date\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_location\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_device\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_platform\_id\textquotesingle{}}\NormalTok{,}
                     \StringTok{\textquotesingle{}viewing\_people\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}review\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\textquotesingle{}}\NormalTok{]}
\NormalTok{                )}
                \ControlFlowTok{for}\NormalTok{ viewing }\KeywordTok{in}\NormalTok{ Viewing.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                    filewriter.writerow([viewing.uuid, viewing.movie\_id, viewing.watch\_date,}
\NormalTok{                                         (viewing.watch\_location\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_location }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         (viewing.watch\_device\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_device }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         (viewing.watch\_platform\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_platform }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ viewing.people\_with.}\BuiltInTok{all}\NormalTok{()], viewing.review, viewing.my\_rating])}
            \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/credit.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                      encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{                filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}person\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}department\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}character\_job\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}order\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}order\_score\textquotesingle{}}\NormalTok{,}
                     \StringTok{\textquotesingle{}order\_weighted\_score\textquotesingle{}}\NormalTok{]}
\NormalTok{                )}
                \ControlFlowTok{for}\NormalTok{ credit }\KeywordTok{in}\NormalTok{ Credit.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                    filewriter.writerow(}
\NormalTok{                        [credit.uuid, credit.person\_id, credit.movie\_id, credit.department, credit.character\_job,}
\NormalTok{                         credit.order, credit.order\_score, credit.credit\_order\_weighted\_score])}
\end{Highlighting}
\end{Shaded}

\hypertarget{code-and-data}{%
\section{Code and data}\label{code-and-data}}

\hypertarget{include-the-code-and-data-to-reproduce-your-analysis.-the-code-should-include-clear-comments-and-should-run-correctly-without-errors.}{%
\paragraph{Include the code and data to reproduce your analysis. The
code should include clear comments and should run correctly without
errors.}\label{include-the-code-and-data-to-reproduce-your-analysis.-the-code-should-include-clear-comments-and-should-run-correctly-without-errors.}}

Code and data included throughout.

\end{document}
