% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\title{Stat 410 Aidan's Movies}
\author{Aidan Gerber}
\date{April 29th, 2022}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Stat 410 Aidan's Movies},
  pdfauthor={Aidan Gerber},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{setspace}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\begin{document}
\maketitle

{
\setcounter{tocdepth}{3}
\tableofcontents
}
\doublespacing

\hypertarget{source-code}{%
\section{\texorpdfstring{\href{https://github.com/AidanG1/stat410}{Source
Code}}{Source Code}}\label{source-code}}

\hypertarget{project-statement}{%
\section{Project statement}\label{project-statement}}

Back to top

\hypertarget{what-is-the-purpose-of-your-analysis-what-effect-are-you-investigating-why}{%
\paragraph{What is the purpose of your analysis? What effect are you
investigating?
Why?}\label{what-is-the-purpose-of-your-analysis-what-effect-are-you-investigating-why}}

The purpose of my analysis is to determine what movies I will enjoy the
most. I will do this by creating a model with the response variable of
how much I liked a movie out of 100 and predicting it with data on
various movie reviews, genres, cast and crew, and more. I am doing this
so that I can figure out which movies I will want to watch because I can
be confident that I will enjoy them.

\hypertarget{data-description}{%
\section{Data description}\label{data-description}}

Back to top

\hypertarget{how-were-the-data-collected-how-do-these-data-help-you-answer-the-relevant-research-questions}{%
\paragraph{How were the data collected? How do these data help you
answer the relevant research
questions?}\label{how-were-the-data-collected-how-do-these-data-help-you-answer-the-relevant-research-questions}}

The data was collected over time by me. A partial dataset in json form
is available on my website here:
\url{https://www.tradethisandthat.com/movies/api/all_movies/}. In the
references there is python code I wrote to turn the mySQL database into
a csv. Data from TMDB was collected using their open API. Data from IMDB
was collected by web scraping their page for awards and finding any
Oscars as well as scraping their page for rating distributions. Much of
the data is gotten with python code that I run on movie addition with
Django. My rating and metacritic ratings are collected by me.

\hypertarget{exploratory-data-analysis}{%
\section{Exploratory data analysis}\label{exploratory-data-analysis}}

Back to top

\hypertarget{what-are-the-basic-features-of-the-data-what-are-the-variables-how-are-the-variables-related-are-there-any-unusual-patterns}{%
\paragraph{What are the basic features of the data? What are the
variables? How are the variables related? Are there any unusual
patterns?}\label{what-are-the-basic-features-of-the-data-what-are-the-variables-how-are-the-variables-related-are-there-any-unusual-patterns}}

None of the variables are too highly related to my rating. The highest
correlations are to imdb\_rating, tmdb\_rating. The other variables
above 0.6 correlation are variables that are highly correlated with
imdb\_rating like imdb\_arithmetic\_mean, imdb\_us\_rating,
imdb\_top\_1000\_rating, and imdb\_not\_us\_rating. Something important
to note is that most variables in the dataset make sense linearly such
as my\_rating and imdb\_rating. Since my\_rating is on a 0 to 100 scale,
in an MLR setting other variables within a specific range work best if
they are not transformed such as IMDB rating, between 0 to 10, TMDB
rating between 0 to 10, or Metacritic rating between 0 and 100. When
attempting to use uncapped data, they were insignificant. This is
evident when looking at IMDB count vs IMDB Top 1000 Count. When using a
log transformation, the full IMDB count becomes more significant which
makes sense since it includes more data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{movies\_to\_print }\OtherTok{=}\NormalTok{ movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(name, my\_rating, imdb\_rating, metacritic\_rating, tmdb\_rating, imdb\_count, tmdb\_count, release\_date, revenue, budget, award\_count, franchise\_name, mpaa\_name, genres\_names, production\_company\_names)}
\NormalTok{movies\_to\_print }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 586 x 15
##    name            my_rating imdb_rating metacritic_rati~ tmdb_rating imdb_count
##    <chr>               <dbl>       <dbl>            <dbl>       <dbl>      <dbl>
##  1 101 Dalmatians         56         5.7               49         5.9     109975
##  2 12 Angry Men           96         9                 96         8.5     760712
##  3 12 Years a Sla~        76         8.1               96         7.9     684042
##  4 2001: A Space ~        61         8.3               84         8.1     649596
##  5 21                     36         6.8               64         6.7     246029
##  6 21 Jump Street         84         7.2               69         6.9     544820
##  7 3 Idiots               87         8.4               67         8       384266
##  8 300                    35         7.6               52         7.2     800537
##  9 A Bug's Life           40         7.2               77         7       285675
## 10 A Call to Spy          42         6.6               65         6.8       6472
## # ... with 576 more rows, and 9 more variables: tmdb_count <dbl>,
## #   release_date <date>, revenue <dbl>, budget <dbl>, award_count <dbl>,
## #   franchise_name <chr>, mpaa_name <chr>, genres_names <chr>,
## #   production_company_names <chr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{imdb\_mlr }\OtherTok{=} \FunctionTok{lm}\NormalTok{(metacritic\_rating }\SpecialCharTok{\textasciitilde{}}\NormalTok{ imdb\_rating }\SpecialCharTok{+}\NormalTok{ award\_count }\SpecialCharTok{+}\NormalTok{ imdb\_top\_1000\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies\_no\_na) }\CommentTok{\# creating a basic MLR to interpolate metacritic ratings from imdb ratings}

\NormalTok{movies}\SpecialCharTok{$}\NormalTok{mpaa\_name }\OtherTok{=} \FunctionTok{as.numeric}\NormalTok{(}\FunctionTok{as.factor}\NormalTok{(movies}\SpecialCharTok{$}\NormalTok{mpaa\_name)) }\CommentTok{\# turning mpaa\_name into a factor so that it can be used for levels.}

\NormalTok{batch\_credit\_filter }\OtherTok{=} \ControlFlowTok{function}\NormalTok{(movie\_ids, person\_id\_param) \{}
  \CommentTok{\# function to create dummy variables of whether a person with a specific id appears in a movie}
\NormalTok{  results }\OtherTok{=} \FunctionTok{c}\NormalTok{()}
  \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{length}\NormalTok{(movie\_ids)) \{}
\NormalTok{    creds }\OtherTok{=}\NormalTok{ credits }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(movie\_id}\SpecialCharTok{==}\NormalTok{movie\_ids[i])}
\NormalTok{    results }\OtherTok{=} \FunctionTok{append}\NormalTok{(results, }\FunctionTok{ifelse}\NormalTok{(person\_id\_param }\SpecialCharTok{\%in\%}\NormalTok{ creds}\SpecialCharTok{$}\NormalTok{person\_id, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{))}
\NormalTok{  \}}
\NormalTok{  results}
\NormalTok{\}}

\NormalTok{continuous\_movies }\OtherTok{=}\NormalTok{ movies }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# main dplyr code to create the tbl}
  \FunctionTok{arrange}\NormalTok{(imdb\_rating) }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# since Metacritic ratings have the highest correlation to IMDB ratings}
  \FunctionTok{select}\NormalTok{(uuid,name,my\_rating, imdb\_rating, tmdb\_rating, tmdb\_count, metacritic\_rating, budget, revenue, runtime, award\_count, imdb\_count, imdb\_arithmetic\_mean, imdb\_median, imdb\_top\_1000\_rating, imdb\_top\_1000\_count, imdb\_us\_rating, imdb\_us\_count, imdb\_not\_us\_rating, imdb\_not\_us\_count,genres\_names,mpaa\_name,imdb\_rating\_percentile,tmdb\_rating\_percentile,metacritic\_rating\_percentile) }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# selecting useful continuous columns}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{metacritic\_rating =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(metacritic\_rating), }\FunctionTok{predict}\NormalTok{(imdb\_mlr,}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{imdb\_rating=}\NormalTok{imdb\_rating, }\AttributeTok{award\_count=}\NormalTok{award\_count,}\AttributeTok{imdb\_top\_1000\_rating=}\NormalTok{imdb\_top\_1000\_rating)), metacritic\_rating)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{( }\CommentTok{\# interpolating NA metacritic values}
    \AttributeTok{is\_action =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Action\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{), }\CommentTok{\# creating dummy variables for different genres}
    \AttributeTok{is\_comedy =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Comedy\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_adventure =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Adventure\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_animation =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Animation\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_family =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Family\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_drama =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Drama\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_scifi =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Science Fiction\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_thriller =} \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{\textquotesingle{}Thriller\textquotesingle{}}\NormalTok{,genres\_names),}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{),}
    \AttributeTok{is\_brad\_pitt =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}Laq4vXpGTZpfFFqDcHs5KV\textquotesingle{}}\NormalTok{), }\CommentTok{\# creating dummy variables for crew members to test significance}
    \AttributeTok{is\_stan\_lee =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}QzvrSM5wqckocFLj3AEZaV\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_christopher\_nolan =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}keZ3UQoTZ4XZKb79VUXDgG\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_spielberg =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}naF68ZLuf7v6upwViuNVUm\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_harrison\_ford =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}GTw4tYdeQmWQ6YdgAa3hGu\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_matt\_damon =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}czP9E4RMt6u9sfTTML9eMR\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_wes\_anderson =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}JVxsaqF8Rxzy3CVxzvQWnd\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_tom\_cruise =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}e4Eiprq53YfhZvwmc8SrLr\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_john\_williams =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}DyCbZvFwBgugBpjDaqx8kk\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_rdj =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}Bpb5BiRdou7xQHjbU7GUDv\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_quentin\_tarantino =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}QLKZWkzmAovVDJXZN8eu3v\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_tom\_hanks =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}7tqrqC9rgLHtXckENws9Fy\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_george\_lucas =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}DRdnxAsNAZAp7HYsspMMtz\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_leonardo\_dicaprio =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}FuCDtnxehhqRrKqh9qC7Dj\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_the\_rock =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}VbfEpXpRyzNfjTppSLU9ei\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_stanley\_kubrick =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}PfnG2E5kKDAM2PrrUdW9jk\textquotesingle{}}\NormalTok{),}
    \CommentTok{\# is\_john\_hughes = batch\_credit\_filter(uuid,\textquotesingle{}CkytgUXum2syFtLkgy9dyi\textquotesingle{}),}
    \AttributeTok{is\_jim\_carrey =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}T2K6TBzwq2qavcVFeGL8Rc\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_wally\_pfister =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}L8jtAQbm3ynBna4857d5j2\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_henry\_fonda =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}K5qeaJKmMQen8dMEqY75F4\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_morgan\_freeman =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}FHCFi8DwCzoJbCRC34DMRj\textquotesingle{}}\NormalTok{),}
    \CommentTok{\# is\_bong\_joon\_ho = batch\_credit\_filter(uuid,\textquotesingle{}VhJUKLUtNBFJsHcSTiAyMy\textquotesingle{}),}
    \CommentTok{\# is\_dustin\_hoffman = batch\_credit\_filter(uuid,\textquotesingle{}gc7HESshGq5Lh7gD2MH6wR\textquotesingle{}),}
    \CommentTok{\# is\_arnold\_schwarz = batch\_credit\_filter(uuid,\textquotesingle{}JYP3ANQFwkmsQYPGwj77gk\textquotesingle{}),}
    \AttributeTok{is\_jack\_nicholson =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}VxqAcnJqT6d7vjcHcpXQoL\textquotesingle{}}\NormalTok{),}
    \CommentTok{\# is\_aamir\_khan = batch\_credit\_filter(uuid,\textquotesingle{}jWk22meEpdCAhTdpKCfBxg\textquotesingle{}),}
    \AttributeTok{is\_sean\_connery =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}57UUtEPqsvkpCSmeGPraq8\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_brad\_bird =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}AbANa443DEn6zfpidFA73z\textquotesingle{}}\NormalTok{),}
    \AttributeTok{is\_natalie\_portman =} \FunctionTok{batch\_credit\_filter}\NormalTok{(uuid,}\StringTok{\textquotesingle{}JSN7GommYrTooGeh5WzvPg\textquotesingle{}}\NormalTok{),}
    \CommentTok{\# is\_robin\_williams = batch\_credit\_filter(uuid,\textquotesingle{}C56iyMS2VJXc6gnW3ezcDC\textquotesingle{}),}
    \CommentTok{\# is\_sandra\_bullock = batch\_credit\_filter(uuid,\textquotesingle{}efknfaN8AeojtnMGCfzVR8\textquotesingle{}),}
    \CommentTok{\# is\_bill\_murray = batch\_credit\_filter(uuid,\textquotesingle{}aDeM2LwCunLFnKR4YaziPa\textquotesingle{}),}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{genres\_names,}\SpecialCharTok{{-}}\NormalTok{uuid)}
\NormalTok{cor\_matrix }\OtherTok{=}\NormalTok{ continuous\_movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{name) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{cor}\NormalTok{()}\CommentTok{\# creating correlation matrix}
\NormalTok{cor\_matrix[}\DecValTok{1}\NormalTok{,]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                    my_rating                  imdb_rating 
##                  1.000000000                  0.657608684 
##                  tmdb_rating                   tmdb_count 
##                  0.614192677                  0.437103919 
##            metacritic_rating                       budget 
##                  0.509691045                  0.038192224 
##                      revenue                      runtime 
##                  0.167667022                  0.287863417 
##                  award_count                   imdb_count 
##                  0.329820850                  0.510161430 
##         imdb_arithmetic_mean                  imdb_median 
##                  0.634252867                  0.517229746 
##         imdb_top_1000_rating          imdb_top_1000_count 
##                  0.647339420                  0.482491458 
##               imdb_us_rating                imdb_us_count 
##                  0.655470838                  0.494646732 
##           imdb_not_us_rating            imdb_not_us_count 
##                  0.649562081                  0.500003380 
##                    mpaa_name       imdb_rating_percentile 
##                  0.052092101                  0.643730839 
##       tmdb_rating_percentile metacritic_rating_percentile 
##                  0.611130631                  0.504582195 
##                    is_action                    is_comedy 
##                  0.059484957                 -0.187789648 
##                 is_adventure                 is_animation 
##                 -0.064860956                 -0.065148143 
##                    is_family                     is_drama 
##                 -0.151693475                  0.197823706 
##                     is_scifi                  is_thriller 
##                  0.064167770                  0.068301993 
##                 is_brad_pitt                  is_stan_lee 
##                  0.093952319                  0.096389472 
##         is_christopher_nolan                 is_spielberg 
##                  0.147864049                  0.079544469 
##             is_harrison_ford                is_matt_damon 
##                  0.141412621                  0.117606692 
##              is_wes_anderson                is_tom_cruise 
##                  0.092686335                  0.026335233 
##             is_john_williams                       is_rdj 
##                  0.176133532                  0.064942367 
##         is_quentin_tarantino                 is_tom_hanks 
##                  0.050142345                  0.063882501 
##              is_george_lucas         is_leonardo_dicaprio 
##                  0.126677335                  0.075455453 
##                  is_the_rock           is_stanley_kubrick 
##                 -0.020816763                  0.064227775 
##                is_jim_carrey             is_wally_pfister 
##                  0.027645696                  0.148044199 
##               is_henry_fonda            is_morgan_freeman 
##                  0.087351607                  0.080671346 
##            is_jack_nicholson              is_sean_connery 
##                 -0.005494098                  0.088991757 
##                 is_brad_bird           is_natalie_portman 
##                  0.060264840                  0.075279604
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{high\_cor\_cm }\OtherTok{=}\NormalTok{ continuous\_movies }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(my\_rating,imdb\_rating,tmdb\_rating,imdb\_count,metacritic\_rating,award\_count)}
\end{Highlighting}
\end{Shaded}

This R code creates the main dataset that I am analyzing. The first
thing I did was deciding to interpolate null values rather than removing
than. The only category will null values was Metacritic rating since
some movies are not on Metacritic. To interpolate Metacritic ratings, I
created a basic MLR to predict them from movie characteristics that are
not related to me or my ratings.

The next step was to make mpaa\_name a numeric factor allowing it to be
used as a dummy variable. The most common MPAA ratings for movies that I
have seen are PG-13(209), PG(179), R(135), G(27), and NR(21).

After that, I wrote a function to check if a person of a specific id
appeared in a movie and return 1 or 0. This combined the separate
credits and movies tables. Credits are 1-to-1 related with both movies
and people so I checked those columns.

Finally, it was time to use dplyr to get the dataset. I began by
arranging by IMDB rating since Metacritic ratings are most related to
IMDB ratings. Then, I selected the desired columns from the larger
dataset. After that, I created dummy variables for both genres and crew.

\begin{itemize}
\tightlist
\item
  I chose every genre that I have seen more than 100 movies from.

  \begin{itemize}
  \tightlist
  \item
    Comedy(266)
  \item
    Adventure(239)
  \item
    Action(213)
  \item
    Drama(167)
  \item
    Family(166)
  \item
    Science Fiction(132)
  \item
    Animation(126)
  \item
    Thriller(102)
  \end{itemize}
\end{itemize}

Choosing cast and crew members was more difficult. I selected people
that I thought had the ability to make movies more than the sum of their
parts. I decided to choose many more people than I expected to
significant and have them whittled down through AIC and BIC.

Looking at the correlation matrix of my rating to all the variables in
the final dataset, I noticed that imdb\_rating is most significant.
Barely behind are tmdb\_rating, imdb\_arithmetic\_mean,
imdb\_top\_1000\_rating, imdb\_us\_rating, imdb\_not\_us\_rating,
imdb\_rating\_percentile, and tmdb\_rating\_percentile. None of these
are surprising and each of them are correlated with each other. There
were also reasonably strong correlations between my\_rating and
imdb\_count with less strong ones to award\_count, runtime, and revenue.
In terms of genres, the highest positive correlation was to drama with
large negative correlations to comedy and family. For people, the
highest positive correlations were to John Williams, Wally Pfister,
Christopher Nolan, Harrison Ford, George Lucas, and Matt Damon.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{pairs}\NormalTok{(high\_cor\_cm) }\CommentTok{\# graphing pairs of specific values}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-5-1}

\hypertarget{data-analysis}{%
\section{Data analysis}\label{data-analysis}}

Back to top

\hypertarget{what-is-the-statistical-model-or-models-that-you-are-using-why-is-this-an-appropriate-model-to-use-do-the-model-diagnostics-contradict-the-model-assumptions-how-do-you-interpret-the-results-from-the-statistical-analysis-in-the-context-of-your-research-question}{%
\paragraph{What is the statistical model (or models) that you are using?
Why is this an appropriate model to use? Do the model diagnostics
contradict the model assumptions? How do you interpret the results from
the statistical analysis in the context of your research
question?}\label{what-is-the-statistical-model-or-models-that-you-are-using-why-is-this-an-appropriate-model-to-use-do-the-model-diagnostics-contradict-the-model-assumptions-how-do-you-interpret-the-results-from-the-statistical-analysis-in-the-context-of-your-research-question}}

I tried fitting many different models including SLRs, MLRs, polynomials,
montone transformations, ridge, lasso, and GAMs.

\hypertarget{models}{%
\section{Models}\label{models}}

Back to top

\hypertarget{slr}{%
\subsection{SLR}\label{slr}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# begin with some simple models}
\NormalTok{fit1 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.975  -8.660   2.319  10.025  50.625 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept) -36.1699     4.4286  -8.167 1.96e-15 ***
## imdb_rating  12.9445     0.6136  21.095  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.13 on 584 degrees of freedom
## Multiple R-squared:  0.4324, Adjusted R-squared:  0.4315 
## F-statistic:   445 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit2 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{metacritic\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ metacritic_rating, data = continuous_movies)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -52.37 -10.01   1.52  11.83  38.26 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       15.80834    2.91499   5.423 8.59e-08 ***
## metacritic_rating  0.61262    0.04279  14.316  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 16.14 on 584 degrees of freedom
## Multiple R-squared:  0.2598, Adjusted R-squared:  0.2585 
## F-statistic:   205 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit3 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{tmdb\_rating, }\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ tmdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.043  -8.252   2.349  10.104  40.173 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept) -51.0368     5.7467  -8.881   <2e-16 ***
## tmdb_rating  15.1543     0.8057  18.808   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.8 on 584 degrees of freedom
## Multiple R-squared:  0.3772, Adjusted R-squared:  0.3762 
## F-statistic: 353.7 on 1 and 584 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit1}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit2}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit3}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"IMDB"}\NormalTok{, }\StringTok{"TMDB"}\NormalTok{,}\StringTok{\textquotesingle{}Metacritic\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-6-1}

\hypertarget{mlr}{%
\subsection{MLR}\label{mlr}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit4 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{+}\NormalTok{metacritic\_rating}\SpecialCharTok{+}\NormalTok{tmdb\_rating,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create an MLR with just movie ratings from other sources}
\FunctionTok{summary}\NormalTok{(fit4)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + metacritic_rating + tmdb_rating, 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.326  -8.704   2.258   9.844  49.695 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       -40.48555    5.79723  -6.984 7.88e-12 ***
## imdb_rating        10.53253    1.55661   6.766 3.23e-11 ***
## metacritic_rating   0.03985    0.05674   0.702    0.483    
## tmdb_rating         2.66900    1.78948   1.491    0.136    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 14.12 on 582 degrees of freedom
## Multiple R-squared:  0.4352, Adjusted R-squared:  0.4323 
## F-statistic: 149.5 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit5 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create an MLR with all linear terms}
\FunctionTok{summary}\NormalTok{(fit5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ . - name, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -42.538  -7.922   1.255   8.507  50.551 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(>|t|)    
## (Intercept)                   8.339e+00  2.226e+01   0.375 0.708126    
## imdb_rating                   5.033e+00  6.358e+00   0.792 0.428895    
## tmdb_rating                  -6.790e+00  5.262e+00  -1.291 0.197432    
## tmdb_count                   -1.985e-04  3.723e-04  -0.533 0.594174    
## metacritic_rating            -1.895e-01  1.293e-01  -1.465 0.143494    
## budget                       -2.020e-08  1.586e-08  -1.274 0.203363    
## revenue                      -9.636e-10  2.905e-09  -0.332 0.740267    
## runtime                      -3.417e-02  4.181e-02  -0.817 0.414197    
## award_count                  -3.764e-01  3.017e-01  -1.248 0.212710    
## imdb_count                    3.951e-05  1.618e-05   2.442 0.014938 *  
## imdb_arithmetic_mean         -2.466e+00  3.396e+00  -0.726 0.468122    
## imdb_median                  -1.721e-01  8.734e-01  -0.197 0.843877    
## imdb_top_1000_rating          1.285e+00  1.851e+00   0.694 0.487824    
## imdb_top_1000_count           2.263e-02  6.250e-03   3.621 0.000321 ***
## imdb_us_rating                5.708e+00  4.327e+00   1.319 0.187725    
## imdb_us_count                -1.382e-04  5.890e-05  -2.347 0.019293 *  
## imdb_not_us_rating            2.717e+00  4.611e+00   0.589 0.555941    
## imdb_not_us_count            -5.191e-05  3.769e-05  -1.377 0.168991    
## mpaa_name                     2.479e-01  6.245e-01   0.397 0.691504    
## imdb_rating_percentile       -1.562e-01  1.139e-01  -1.371 0.171037    
## tmdb_rating_percentile        3.140e-01  1.476e-01   2.128 0.033799 *  
## metacritic_rating_percentile  1.070e-01  6.203e-02   1.724 0.085227 .  
## is_action                     2.831e+00  1.632e+00   1.735 0.083348 .  
## is_comedy                     1.453e+00  1.570e+00   0.926 0.354866    
## is_adventure                 -2.823e+00  1.535e+00  -1.839 0.066401 .  
## is_animation                  1.552e+00  2.629e+00   0.590 0.555294    
## is_family                     3.497e+00  2.346e+00   1.490 0.136726    
## is_drama                      7.640e-01  1.750e+00   0.437 0.662625    
## is_scifi                      1.438e+00  1.650e+00   0.872 0.383745    
## is_thriller                   3.957e-01  1.785e+00   0.222 0.824634    
## is_brad_pitt                  4.341e+00  4.005e+00   1.084 0.278928    
## is_stan_lee                   3.581e+00  3.041e+00   1.178 0.239381    
## is_christopher_nolan          5.339e+00  6.415e+00   0.832 0.405602    
## is_spielberg                 -1.693e+00  3.416e+00  -0.496 0.620293    
## is_harrison_ford              3.934e+00  5.425e+00   0.725 0.468638    
## is_matt_damon                 5.941e+00  4.136e+00   1.436 0.151452    
## is_wes_anderson               1.083e+01  5.647e+00   1.917 0.055730 .  
## is_tom_cruise                 2.335e+00  4.310e+00   0.542 0.588211    
## is_john_williams              1.025e+01  4.416e+00   2.321 0.020646 *  
## is_rdj                       -4.223e-01  4.668e+00  -0.090 0.927939    
## is_quentin_tarantino         -4.917e+00  5.879e+00  -0.836 0.403323    
## is_tom_hanks                  1.939e+00  4.125e+00   0.470 0.638442    
## is_george_lucas               1.571e+00  5.601e+00   0.281 0.779180    
## is_leonardo_dicaprio          2.724e-01  5.604e+00   0.049 0.961251    
## is_the_rock                   3.631e+00  3.966e+00   0.915 0.360365    
## is_stanley_kubrick            1.361e+00  6.420e+00   0.212 0.832239    
## is_jim_carrey                 7.740e+00  5.184e+00   1.493 0.136067    
## is_wally_pfister              5.774e+00  6.818e+00   0.847 0.397443    
## is_henry_fonda                1.641e+01  1.370e+01   1.198 0.231578    
## is_morgan_freeman            -2.214e+00  4.826e+00  -0.459 0.646689    
## is_jack_nicholson            -1.498e+01  8.136e+00  -1.842 0.066068 .  
## is_sean_connery               1.369e+01  8.135e+00   1.683 0.092948 .  
## is_brad_bird                  7.873e+00  6.343e+00   1.241 0.215080    
## is_natalie_portman            2.281e+00  5.016e+00   0.455 0.649509    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.3 on 532 degrees of freedom
## Multiple R-squared:  0.542,  Adjusted R-squared:  0.4964 
## F-statistic: 11.88 on 53 and 532 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit6 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_count}\SpecialCharTok{+}\NormalTok{imdb\_top\_1000\_count}\SpecialCharTok{+}\NormalTok{imdb\_us\_count}\SpecialCharTok{+}\NormalTok{imdb\_not\_us\_count,}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit6) }\CommentTok{\# create an MLR with just movie rating counts}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_count + imdb_top_1000_count + imdb_us_count + 
##     imdb_not_us_count, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.720  -9.889   1.807  11.038  43.118 
## 
## Coefficients:
##                       Estimate Std. Error t value Pr(>|t|)    
## (Intercept)          3.725e+01  2.108e+00  17.675  < 2e-16 ***
## imdb_count           4.757e-05  1.162e-05   4.095 4.82e-05 ***
## imdb_top_1000_count  2.468e-02  4.845e-03   5.093 4.76e-07 ***
## imdb_us_count       -1.000e-05  4.480e-05  -0.223   0.8234    
## imdb_not_us_count   -8.532e-05  3.331e-05  -2.561   0.0107 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 15.8 on 581 degrees of freedom
## Multiple R-squared:  0.2944, Adjusted R-squared:  0.2895 
## F-statistic: 60.59 on 4 and 581 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit4}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit5}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit6}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"IMDB+TMDB+Metacritic"}\NormalTok{, }\StringTok{"All"}\NormalTok{,}\StringTok{\textquotesingle{}All Counts\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{transformed-and-polynomial-mlrs}{%
\subsection{Transformed and Polynomial
MLRs}\label{transformed-and-polynomial-mlrs}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit7 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(my\_rating)}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# MLR with full model to sqrt of my rating}
\FunctionTok{summary}\NormalTok{(fit7)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = sqrt(my_rating) ~ . - name, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.8742 -0.4941  0.1247  0.6301  3.9422 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(>|t|)    
## (Intercept)                   3.443e+00  1.681e+00   2.048 0.041079 *  
## imdb_rating                   7.414e-01  4.802e-01   1.544 0.123185    
## tmdb_rating                  -7.710e-01  3.974e-01  -1.940 0.052906 .  
## tmdb_count                   -1.655e-05  2.812e-05  -0.589 0.556278    
## metacritic_rating            -1.475e-02  9.769e-03  -1.510 0.131627    
## budget                       -1.363e-09  1.198e-09  -1.138 0.255586    
## revenue                      -1.099e-11  2.194e-10  -0.050 0.960088    
## runtime                      -1.994e-03  3.158e-03  -0.631 0.528018    
## award_count                  -2.776e-02  2.279e-02  -1.218 0.223629    
## imdb_count                    2.572e-06  1.222e-06   2.105 0.035784 *  
## imdb_arithmetic_mean         -2.734e-01  2.565e-01  -1.066 0.286891    
## imdb_median                  -4.496e-03  6.597e-02  -0.068 0.945684    
## imdb_top_1000_rating          1.020e-01  1.398e-01   0.730 0.465922    
## imdb_top_1000_count           1.771e-03  4.721e-04   3.751 0.000196 ***
## imdb_us_rating                4.679e-01  3.268e-01   1.432 0.152787    
## imdb_us_count                -9.905e-06  4.449e-06  -2.226 0.026406 *  
## imdb_not_us_rating            2.144e-01  3.482e-01   0.616 0.538317    
## imdb_not_us_count            -3.503e-06  2.846e-06  -1.231 0.218913    
## mpaa_name                     1.814e-02  4.716e-02   0.385 0.700701    
## imdb_rating_percentile       -2.242e-02  8.606e-03  -2.605 0.009433 ** 
## tmdb_rating_percentile        3.017e-02  1.115e-02   2.706 0.007019 ** 
## metacritic_rating_percentile  7.622e-03  4.685e-03   1.627 0.104340    
## is_action                     2.054e-01  1.232e-01   1.667 0.096163 .  
## is_comedy                     7.410e-02  1.185e-01   0.625 0.532222    
## is_adventure                 -2.241e-01  1.159e-01  -1.934 0.053688 .  
## is_animation                  1.233e-01  1.986e-01   0.621 0.534973    
## is_family                     2.665e-01  1.772e-01   1.504 0.133201    
## is_drama                      3.973e-02  1.322e-01   0.301 0.763861    
## is_scifi                      1.038e-01  1.246e-01   0.833 0.405216    
## is_thriller                   4.076e-02  1.348e-01   0.302 0.762504    
## is_brad_pitt                  3.207e-01  3.025e-01   1.060 0.289603    
## is_stan_lee                   2.611e-01  2.297e-01   1.137 0.256045    
## is_christopher_nolan          4.165e-01  4.845e-01   0.860 0.390377    
## is_spielberg                 -1.223e-01  2.580e-01  -0.474 0.635507    
## is_harrison_ford              2.371e-01  4.097e-01   0.579 0.562959    
## is_matt_damon                 3.857e-01  3.124e-01   1.235 0.217457    
## is_wes_anderson               7.262e-01  4.265e-01   1.703 0.089202 .  
## is_tom_cruise                 1.861e-01  3.256e-01   0.572 0.567872    
## is_john_williams              6.652e-01  3.336e-01   1.994 0.046619 *  
## is_rdj                       -3.467e-03  3.525e-01  -0.010 0.992156    
## is_quentin_tarantino         -3.138e-01  4.440e-01  -0.707 0.480080    
## is_tom_hanks                  1.338e-01  3.115e-01   0.429 0.667796    
## is_george_lucas               1.065e-01  4.230e-01   0.252 0.801392    
## is_leonardo_dicaprio          5.955e-02  4.233e-01   0.141 0.888171    
## is_the_rock                   2.445e-01  2.995e-01   0.816 0.414656    
## is_stanley_kubrick            9.460e-02  4.849e-01   0.195 0.845378    
## is_jim_carrey                 5.508e-01  3.916e-01   1.407 0.160143    
## is_wally_pfister              3.706e-01  5.149e-01   0.720 0.472072    
## is_henry_fonda                7.140e-01  1.035e+00   0.690 0.490624    
## is_morgan_freeman            -2.606e-01  3.645e-01  -0.715 0.475033    
## is_jack_nicholson            -9.565e-01  6.145e-01  -1.557 0.120156    
## is_sean_connery               8.239e-01  6.144e-01   1.341 0.180508    
## is_brad_bird                  5.086e-01  4.791e-01   1.062 0.288919    
## is_natalie_portman            1.679e-01  3.788e-01   0.443 0.657707    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.005 on 532 degrees of freedom
## Multiple R-squared:  0.5229, Adjusted R-squared:  0.4753 
## F-statistic:    11 on 53 and 532 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit8 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{log}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{imdb\_rating,}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# simple model with my\_rating to imdb\_rating and log(imdb\_count)}
\FunctionTok{summary}\NormalTok{(fit8)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ log(imdb_count) + imdb_rating, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.555  -8.591   1.701   9.537  51.826 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(>|t|)    
## (Intercept)     -55.8570     5.3204 -10.499  < 2e-16 ***
## log(imdb_count)   2.7418     0.4381   6.258 7.57e-10 ***
## imdb_rating      11.0089     0.6702  16.427  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.69 on 583 degrees of freedom
## Multiple R-squared:  0.4682, Adjusted R-squared:  0.4663 
## F-statistic: 256.6 on 2 and 583 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit9 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{+}\FunctionTok{I}\NormalTok{(imdb\_rating}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{)}\SpecialCharTok{+}\FunctionTok{I}\NormalTok{(imdb\_rating}\SpecialCharTok{\^{}}\DecValTok{3}\NormalTok{),}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting a cubic model with imdb\_rating}
\FunctionTok{summary}\NormalTok{(fit9)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + I(imdb_rating^2) + I(imdb_rating^3), 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.486  -8.483   2.207   9.741  48.700 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(>|t|)
## (Intercept)       48.9929    71.1087   0.689    0.491
## imdb_rating      -24.2463    33.8272  -0.717    0.474
## I(imdb_rating^2)   5.2690     5.2629   1.001    0.317
## I(imdb_rating^3)  -0.2430     0.2679  -0.907    0.365
## 
## Residual standard error: 14.13 on 582 degrees of freedom
## Multiple R-squared:  0.4347, Adjusted R-squared:  0.4318 
## F-statistic: 149.2 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit10 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(my\_rating)}\SpecialCharTok{\textasciitilde{}}\FunctionTok{sqrt}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{sqrt}\NormalTok{(imdb\_rating), }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting with sqrts}
\FunctionTok{summary}\NormalTok{(fit10)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = sqrt(my_rating) ~ sqrt(imdb_count) + sqrt(imdb_rating), 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.9775 -0.5516  0.1587  0.6845  3.7046 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(>|t|)    
## (Intercept)       -3.8029151  0.7059644  -5.387 1.04e-07 ***
## sqrt(imdb_count)   0.0009896  0.0001805   5.484 6.20e-08 ***
## sqrt(imdb_rating)  3.9885846  0.2842290  14.033  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.026 on 583 degrees of freedom
## Multiple R-squared:  0.4544, Adjusted R-squared:  0.4525 
## F-statistic: 242.8 on 2 and 583 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit11 }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating }\SpecialCharTok{\textasciitilde{}} \FunctionTok{polym}\NormalTok{(imdb\_rating, imdb\_count,award\_count, }\AttributeTok{degree=}\DecValTok{5}\NormalTok{, }\AttributeTok{raw=}\ConstantTok{TRUE}\NormalTok{),}\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# fitting with a very big polynomial}
\CommentTok{\# summary(fit11)}

\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit7}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit8}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit9}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit10}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{col=}\StringTok{"navajowhite"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit11}\SpecialCharTok{$}\NormalTok{fitted.values}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{,}\AttributeTok{col=}\StringTok{"royalblue"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"SQRT\textasciitilde{}All"}\NormalTok{, }\StringTok{"IMDB+log(imdb\_count)"}\NormalTok{,}\StringTok{\textquotesingle{}IMDB\^{}3\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}SQRT\textasciitilde{}SQRT\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}polym\textquotesingle{}}\NormalTok{),}
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}navajowhite\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}royalblue\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-8-1}

\hypertarget{ridge-and-lasso}{%
\subsection{Ridge and Lasso}\label{ridge-and-lasso}}

Create data matrix to be used for both ridge and lasso.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{X }\OtherTok{=} \FunctionTok{model.matrix}\NormalTok{(}\SpecialCharTok{\textasciitilde{}} \SpecialCharTok{{-}}\DecValTok{1} \SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(imdb\_count) }\SpecialCharTok{+}\NormalTok{ imdb\_rating }\SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(award\_count), }\AttributeTok{data =}\NormalTok{ continuous\_movies) }\CommentTok{\# model to use for ridge and lasso fits}
\NormalTok{y }\OtherTok{=}\NormalTok{ continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating}
\NormalTok{fit\_lm }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating }\SpecialCharTok{\textasciitilde{}} \FunctionTok{sqrt}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{ imdb\_rating }\SpecialCharTok{+} \FunctionTok{sqrt}\NormalTok{(award\_count), }\AttributeTok{data =}\NormalTok{ continuous\_movies) }\CommentTok{\# non{-}ridge and lasso to compare to}
\end{Highlighting}
\end{Shaded}

\hypertarget{ridge}{%
\subsubsection{Ridge}\label{ridge}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_ridge }\OtherTok{=} \FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{) }\CommentTok{\# ridge fit}
\NormalTok{fit.cv.ridge }\OtherTok{=} \FunctionTok{cv.glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{)}
\FunctionTok{plot}\NormalTok{(fit.cv.ridge)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-11-1}

\hypertarget{lasso}{%
\subsubsection{Lasso}\label{lasso}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_lasso }\OtherTok{=} \FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{) }\CommentTok{\# lasso fit}
\NormalTok{fit.cv.lasso }\OtherTok{=} \FunctionTok{cv.glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{)}
\FunctionTok{plot}\NormalTok{(fit.cv.lasso)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-12-1}

\hypertarget{comparison}{%
\subsubsection{Comparison}\label{comparison}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{beta\_hat\_mlr }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit\_lm)}
\NormalTok{beta\_hat\_ridge }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit.cv.ridge, }\AttributeTok{s =} \StringTok{"lambda.1se"}\NormalTok{)}
\NormalTok{beta\_hat\_lasso }\OtherTok{=} \FunctionTok{coef}\NormalTok{(fit.cv.lasso, }\AttributeTok{s =} \StringTok{"lambda.1se"}\NormalTok{)}
\FunctionTok{cbind}\NormalTok{(beta\_hat\_mlr, beta\_hat\_ridge, beta\_hat\_lasso)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 4 x 3 sparse Matrix of class "dgCMatrix"
##                   beta_hat_mlr         s1           s1
## (Intercept)       -24.83846628 3.53534323 -8.363625498
## sqrt(imdb_count)    0.01507946 0.01297789  0.009043295
## imdb_rating        10.20844225 6.25614967  8.363468039
## sqrt(award_count)  -0.05764352 1.50753433  .
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,}\FunctionTok{predict}\NormalTok{(}\FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{0}\NormalTok{),}\FunctionTok{as.matrix}\NormalTok{(X),}\AttributeTok{s=}\NormalTok{fit.cv.ridge}\SpecialCharTok{$}\NormalTok{lambda}\FloatTok{.1}\NormalTok{se),}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,}\FunctionTok{predict}\NormalTok{(}\FunctionTok{glmnet}\NormalTok{(X,y,}\AttributeTok{alpha=}\DecValTok{1}\NormalTok{),}\FunctionTok{as.matrix}\NormalTok{(X),}\AttributeTok{s=}\NormalTok{fit.cv.lasso}\SpecialCharTok{$}\NormalTok{lambda}\FloatTok{.1}\NormalTok{se),}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_lm}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"Ridge"}\NormalTok{, }\StringTok{"Lasso"}\NormalTok{, }\StringTok{"MLR"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-13-1}

\begin{itemize}
\tightlist
\item
  Adjusted R Squared at 1 standard deviation for ridge and lasso:

  \begin{itemize}
  \tightlist
  \item
    ridge: 0.4658365
  \item
    lasso: 0.4671242
  \item
    mlr: 0.4644028
  \end{itemize}
\end{itemize}

Lasso and ridge result in a slight improvement over the MLR since they
take advantage of the bias variance tradeoff. Looking at the beta
values, the different models change the coefficients a lot despite
getting similar results. MLR values IMDB count and IMDB rating much more
than ridge or lasso. Lasso actually removes sqrt(award\_count) to not
much of a detriment.

\hypertarget{steps-with-aic-and-bic}{%
\subsection{Steps with AIC and BIC}\label{steps-with-aic-and-bic}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(leaps) }\CommentTok{\# procedure from lab}
\NormalTok{fit\_full }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{.}\SpecialCharTok{{-}}\NormalTok{name}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(tmdb\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_us\_count)}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_not\_us\_count), }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# start by creating a full and add some log terms for values not bounded to a specific range}
\NormalTok{fit\_null }\OtherTok{=} \FunctionTok{lm}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\DecValTok{1}\NormalTok{, }\AttributeTok{data=}\NormalTok{continuous\_movies) }\CommentTok{\# create a null fit to just an intercept}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{anova}\NormalTok{(fit\_null,fit\_full,}\AttributeTok{test=}\StringTok{\textquotesingle{}F\textquotesingle{}}\NormalTok{) }\CommentTok{\# make sure that the full fit is more significant than the null fit}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Analysis of Variance Table
## 
## Model 1: my_rating ~ 1
## Model 2: my_rating ~ (name + imdb_rating + tmdb_rating + tmdb_count + 
##     metacritic_rating + budget + revenue + runtime + award_count + 
##     imdb_count + imdb_arithmetic_mean + imdb_median + imdb_top_1000_rating + 
##     imdb_top_1000_count + imdb_us_rating + imdb_us_count + imdb_not_us_rating + 
##     imdb_not_us_count + mpaa_name + imdb_rating_percentile + 
##     tmdb_rating_percentile + metacritic_rating_percentile + is_action + 
##     is_comedy + is_adventure + is_animation + is_family + is_drama + 
##     is_scifi + is_thriller + is_brad_pitt + is_stan_lee + is_christopher_nolan + 
##     is_spielberg + is_harrison_ford + is_matt_damon + is_wes_anderson + 
##     is_tom_cruise + is_john_williams + is_rdj + is_quentin_tarantino + 
##     is_tom_hanks + is_george_lucas + is_leonardo_dicaprio + is_the_rock + 
##     is_stanley_kubrick + is_jim_carrey + is_wally_pfister + is_henry_fonda + 
##     is_morgan_freeman + is_jack_nicholson + is_sean_connery + 
##     is_brad_bird + is_natalie_portman) - name + log(imdb_count) + 
##     log(tmdb_count) + log(imdb_us_count) + log(imdb_not_us_count)
##   Res.Df    RSS Df Sum of Sq      F    Pr(>F)    
## 1    585 205512                                  
## 2    528  92342 57    113170 11.352 < 2.2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

Because the p-value for the ful model is significant in comparison to
the null model, it makes sense to continue with AIC and BIC to find a
significant model. The use of AIC and BIC is to penalize adding more
parameters because any parameter improves the fit.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_aic }\OtherTok{=} \FunctionTok{step}\NormalTok{(fit\_null,}\FunctionTok{list}\NormalTok{(}\AttributeTok{upper=}\NormalTok{fit\_full),}\AttributeTok{direction=}\StringTok{\textquotesingle{}forward\textquotesingle{}}\NormalTok{) }\CommentTok{\# run AIC}
\NormalTok{n }\OtherTok{=} \FunctionTok{nrow}\NormalTok{(continuous\_movies)}
\NormalTok{fit\_bic }\OtherTok{=} \FunctionTok{step}\NormalTok{(fit\_null,}\FunctionTok{list}\NormalTok{(}\AttributeTok{upper=}\NormalTok{fit\_full),}\AttributeTok{direction=}\StringTok{\textquotesingle{}forward\textquotesingle{}}\NormalTok{,}\AttributeTok{k=}\FunctionTok{log}\NormalTok{(n)) }\CommentTok{\# run BIC}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit\_aic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + log(imdb_count) + is_john_williams + 
##     tmdb_rating_percentile + is_jack_nicholson + is_sean_connery + 
##     is_wes_anderson + is_matt_damon + is_wally_pfister + imdb_top_1000_count + 
##     is_comedy + is_action + is_jim_carrey, data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -47.321  -8.287   1.374   9.144  48.829 
## 
## Coefficients:
##                          Estimate Std. Error t value Pr(>|t|)    
## (Intercept)            -24.943393  11.605564  -2.149  0.03203 *  
## imdb_rating              7.658182   1.339668   5.716 1.75e-08 ***
## log(imdb_count)          0.904671   0.901130   1.004  0.31584    
## is_john_williams         8.308687   2.896440   2.869  0.00428 ** 
## tmdb_rating_percentile   0.136317   0.042377   3.217  0.00137 ** 
## is_jack_nicholson      -15.645711   7.764177  -2.015  0.04436 *  
## is_sean_connery         14.536230   7.802679   1.863  0.06298 .  
## is_wes_anderson         11.238305   5.528439   2.033  0.04253 *  
## is_matt_damon            8.052574   3.910719   2.059  0.03994 *  
## is_wally_pfister         8.514317   4.819461   1.767  0.07782 .  
## imdb_top_1000_count      0.010227   0.006078   1.683  0.09300 .  
## is_comedy                2.747718   1.262529   2.176  0.02994 *  
## is_action                2.629037   1.278435   2.056  0.04019 *  
## is_jim_carrey            7.871024   5.101206   1.543  0.12339    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.28 on 572 degrees of freedom
## Multiple R-squared:  0.5088, Adjusted R-squared:  0.4976 
## F-statistic: 45.58 on 13 and 572 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(fit\_bic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = my_rating ~ imdb_rating + log(imdb_count) + is_john_williams, 
##     data = continuous_movies)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -45.988  -8.279   1.523   9.610  51.665 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(>|t|)    
## (Intercept)      -53.7527     5.3313 -10.083  < 2e-16 ***
## imdb_rating       10.9580     0.6659  16.456  < 2e-16 ***
## log(imdb_count)    2.5708     0.4389   5.857 7.89e-09 ***
## is_john_williams   8.5850     2.8724   2.989  0.00292 ** 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 13.6 on 582 degrees of freedom
## Multiple R-squared:  0.4762, Adjusted R-squared:  0.4735 
## F-statistic: 176.4 on 3 and 582 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{AIC}\NormalTok{(fit\_bic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 4727.974
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit\_aic}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_bic}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"AIC"}\NormalTok{, }\StringTok{"BIC"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-17-1}

AIC and BIC had very different results. The AIC resulted in my highest
adjusted R\^{}2 of any model (0.4976352). The final AIC selected 14
coefficients. This is very different than the BIC which selected 4. Only
3 variables in the AIC have negative betas, is\_jack\_nicholoson,
is\_adventure, and imdb\_rating. This is unique to this model and is
possible because lots of people have highly positive coefficients and
log(imdb\_count) is also highly positive. Moreover, imdb\_rating does
not have a signifcant p-value in this model. The BIC chooses a much
sparser with just imdb\_rating, log(imdb\_count), and
is\_john\_williams. John Williams is not only an excellent composer but
links many of my favorite movies such as Indiana Jones and Star Wars
while only appearing in 2 movies I rated below a 60: Close Encounters of
the Third Kind and The Lost World: Jurassic Park. Even with such
different models, both the AIC and BIC had similar adjusted r squared
values and their adjusted r squared values were generally in line with
other models.

\hypertarget{general-additive-models}{%
\subsection{General Additive Models}\label{general-additive-models}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(mgcv)}
\end{Highlighting}
\end{Shaded}

\hypertarget{large-gam}{%
\subsubsection{Large GAM}\label{large-gam}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam1 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{s}\NormalTok{(imdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(metacritic\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(tmdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(award\_count)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(runtime),}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ s(imdb_rating) + s(metacritic_rating) + s(tmdb_rating) + 
##     s(imdb_count) + s(award_count) + s(runtime)
## 
## Parametric coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  56.4343     0.5606   100.7   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                        edf Ref.df      F  p-value    
## s(imdb_rating)       1.000  1.000 24.029 1.23e-06 ***
## s(metacritic_rating) 3.051  3.893  1.081    0.318    
## s(tmdb_rating)       2.196  2.822  1.156    0.332    
## s(imdb_count)        3.066  3.836  8.186 3.31e-06 ***
## s(award_count)       1.621  2.015  0.613    0.535    
## s(runtime)           2.471  3.199  1.637    0.195    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## R-sq.(adj) =  0.476   Deviance explained = 48.8%
## GCV = 188.82  Scale est. = 184.17    n = 586
\end{verbatim}

\hypertarget{gam-with-transformations-and-extra-terms}{%
\subsubsection{GAM with Transformations and Extra
Terms}\label{gam-with-transformations-and-extra-terms}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam2 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{s}\NormalTok{(imdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(metacritic\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(tmdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(imdb\_count))}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(}\FunctionTok{sqrt}\NormalTok{(award\_count))}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(runtime)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(budget)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_arithmetic\_mean),}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ s(imdb_rating) + s(metacritic_rating) + s(tmdb_rating) + 
##     s(sqrt(imdb_count)) + s(sqrt(award_count)) + s(runtime) + 
##     s(budget) + s(imdb_arithmetic_mean)
## 
## Parametric coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  56.4343     0.5538   101.9   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                           edf Ref.df      F  p-value    
## s(imdb_rating)          1.000  1.000 10.144  0.00153 ** 
## s(metacritic_rating)    3.146  4.013  1.241  0.29384    
## s(tmdb_rating)          2.612  3.342  1.489  0.18652    
## s(sqrt(imdb_count))     1.000  1.000 19.511 1.19e-05 ***
## s(sqrt(award_count))    2.597  3.143  0.883  0.45300    
## s(runtime)              2.551  3.302  1.410  0.26940    
## s(budget)               4.788  5.851  1.875  0.09210 .  
## s(imdb_arithmetic_mean) 1.000  1.000  0.546  0.46017    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## R-sq.(adj) =  0.488   Deviance explained = 50.5%
## GCV =    186  Scale est. = 179.74    n = 586
\end{verbatim}

\hypertarget{gam-with-genre-interactions-to-imdb-rating-and-revenue}{%
\subsubsection{GAM with Genre Interactions to IMDB Rating and
Revenue}\label{gam-with-genre-interactions-to-imdb-rating-and-revenue}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam3 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_animation}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_family }\SpecialCharTok{+}\NormalTok{ imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_adventure }\SpecialCharTok{+}\NormalTok{ imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_action}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_drama}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_comedy}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_thriller}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{is\_scifi}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{imdb\_rating}\SpecialCharTok{*}\NormalTok{mpaa\_name}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_animation}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_action}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_drama}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_comedy}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_thriller}\SpecialCharTok{+}\NormalTok{revenue}\SpecialCharTok{*}\NormalTok{is\_scifi,}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ imdb_rating * is_animation + imdb_rating * is_family + 
##     imdb_rating * is_adventure + imdb_rating * is_action + imdb_rating * 
##     is_drama + imdb_rating * is_comedy + imdb_rating * is_thriller + 
##     imdb_rating * is_scifi + s(imdb_count) + imdb_rating * mpaa_name + 
##     revenue * is_animation + revenue * is_action + revenue * 
##     is_drama + revenue * is_comedy + revenue * is_thriller + 
##     revenue * is_scifi
## 
## Parametric coefficients:
##                            Estimate Std. Error t value Pr(>|t|)    
## (Intercept)               4.705e-02  1.032e-03  45.577  < 2e-16 ***
## imdb_rating               3.437e-01  7.540e-03  45.577  < 2e-16 ***
## is_animation              4.759e-03  1.044e-04  45.577  < 2e-16 ***
## is_family                 6.716e-03  1.474e-04  45.577  < 2e-16 ***
## is_adventure              9.811e-03  2.153e-04  45.577  < 2e-16 ***
## is_action                 1.447e-02  3.176e-04  45.577  < 2e-16 ***
## is_drama                  1.966e-02  4.313e-04  45.577  < 2e-16 ***
## is_comedy                 1.836e-02  4.028e-04  45.577  < 2e-16 ***
## is_thriller               1.051e-02  2.307e-04  45.577  < 2e-16 ***
## is_scifi                  1.010e-02  2.216e-04  45.577  < 2e-16 ***
## mpaa_name                 2.136e-01  4.686e-03  45.577  < 2e-16 ***
## revenue                   2.050e-08  6.325e-09   3.241  0.00126 ** 
## imdb_rating:is_animation  3.333e-02  7.314e-04  45.577  < 2e-16 ***
## imdb_rating:is_family     4.502e-02  9.878e-04  45.577  < 2e-16 ***
## imdb_rating:is_adventure  6.712e-02  1.473e-03  45.577  < 2e-16 ***
## imdb_rating:is_action     1.017e-01  2.232e-03  45.577  < 2e-16 ***
## imdb_rating:is_drama      1.503e-01  3.297e-03  45.577  < 2e-16 ***
## imdb_rating:is_comedy     1.265e-01  2.776e-03  45.577  < 2e-16 ***
## imdb_rating:is_thriller   7.726e-02  1.695e-03  45.577  < 2e-16 ***
## imdb_rating:is_scifi      7.084e-02  1.554e-03  45.577  < 2e-16 ***
## imdb_rating:mpaa_name     1.561e+00  3.426e-02  45.577  < 2e-16 ***
## is_animation:revenue      1.662e-08  6.052e-09   2.745  0.00623 ** 
## is_action:revenue        -9.210e-09  5.256e-09  -1.752  0.08023 .  
## is_drama:revenue          7.182e-09  5.984e-09   1.200  0.23056    
## is_comedy:revenue        -2.528e-09  5.225e-09  -0.484  0.62866    
## is_thriller:revenue      -5.431e-09  5.659e-09  -0.960  0.33764    
## is_scifi:revenue          6.822e-10  4.677e-09   0.146  0.88408    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                     edf    Ref.df        F p-value    
## s(imdb_count) 6.391e-05 6.391e-05 32503749  <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Rank: 8/36
## R-sq.(adj) =  -0.067   Deviance explained = -7.02%
## GCV = 385.77  Scale est. = 380.5     n = 586
\end{verbatim}

\hypertarget{gam-with-bic-variables}{%
\subsubsection{GAM with BIC Variables}\label{gam-with-bic-variables}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_gam4 }\OtherTok{=} \FunctionTok{gam}\NormalTok{(my\_rating}\SpecialCharTok{\textasciitilde{}}\FunctionTok{s}\NormalTok{(imdb\_rating)}\SpecialCharTok{+}\FunctionTok{s}\NormalTok{(imdb\_count)}\SpecialCharTok{+}\NormalTok{is\_john\_williams}\SpecialCharTok{+}\FunctionTok{log}\NormalTok{(imdb\_count)}\SpecialCharTok{*}\NormalTok{is\_john\_williams,}\AttributeTok{data=}\NormalTok{continuous\_movies)}
\FunctionTok{summary}\NormalTok{(fit\_gam4)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## my_rating ~ s(imdb_rating) + s(imdb_count) + is_john_williams + 
##     log(imdb_count) * is_john_williams
## 
## Parametric coefficients:
##                                  Estimate Std. Error t value Pr(>|t|)    
## (Intercept)                       28.6823     7.4506   3.850 0.000131 ***
## is_john_williams                 -45.0022    75.0277  -0.600 0.548869    
## log(imdb_count)                    2.2408     0.6077   3.687 0.000248 ***
## is_john_williams:log(imdb_count)   4.0007     5.6198   0.712 0.476815    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Approximate significance of smooth terms:
##                  edf Ref.df      F p-value    
## s(imdb_rating) 2.746   3.52 61.315  <2e-16 ***
## s(imdb_count)  1.000   1.00  0.685   0.408    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## R-sq.(adj) =  0.475   Deviance explained = 48.1%
## GCV = 186.91  Scale est. = 184.43    n = 586
\end{verbatim}

\hypertarget{comparison-1}{%
\subsubsection{Comparison}\label{comparison-1}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating, fit\_gam1}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{xlim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{ylim=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{),}\AttributeTok{xlab=}\StringTok{"My Rating"}\NormalTok{,}\AttributeTok{ylab=}\StringTok{"Fitted Values"}\NormalTok{,}\AttributeTok{main=}\StringTok{"My Rating vs Fitted Values"}\NormalTok{,}\AttributeTok{col=}\StringTok{"orchid"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_gam2}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"aquamarine3"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_gam3}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"firebrick4"}\NormalTok{)}
\FunctionTok{points}\NormalTok{(continuous\_movies}\SpecialCharTok{$}\NormalTok{my\_rating,fit\_gam4}\SpecialCharTok{$}\NormalTok{fitted.values,}\AttributeTok{col=}\StringTok{"navajowhite"}\NormalTok{)}
\FunctionTok{legend}\NormalTok{(}\AttributeTok{x =} \StringTok{"topleft"}\NormalTok{, }\AttributeTok{title=}\StringTok{"Models"}\NormalTok{, }\AttributeTok{bg=}\StringTok{"transparent"}\NormalTok{,}
       \AttributeTok{legend=}\FunctionTok{c}\NormalTok{(}\StringTok{"GAM 1"}\NormalTok{, }\StringTok{"GAM 2"}\NormalTok{, }\StringTok{"GAM 3"}\NormalTok{, }\StringTok{"GAM 4"}\NormalTok{), }
       \AttributeTok{fill =} \FunctionTok{c}\NormalTok{(}\StringTok{"orchid"}\NormalTok{,}\StringTok{"aquamarine3"}\NormalTok{,}\StringTok{\textquotesingle{}firebrick4\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}navajowhite\textquotesingle{}}\NormalTok{))}
\FunctionTok{abline}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-23-1}

The fit plots have been withheld for spacing reasons. For the first gam:
IMDB rating and metacritic rating are linear. TMDB rating is linear
until the rating reaches about 6 before increase in slope between 6.5
and 7.5 before flattening. This means that the impact of an increase in
TMDB rating from 7.5 to 7.6 is expected to have a larger impact on my
rating than an increase from 6.4 to 6.5. IMDB count has a very steep
slope until it reaches around 500,000 before flattening out. This impact
is fixed by using a log transformation Finally, runtime actually flips.
When runtime is under an hour, an increase in runtime leads to an
expected increase in my rating. However, as runtime passes 150 minutes,
a higher runtime means an expected decrease in my rating.

For the second gam: All terms are linear except for TMDB rating,
runtime, and budget TMDB rating and runtime have already been discussed.
IMDB arithmetic rating is a new addition to this model and actually has
a negative beta model. This exemplifies the slight difference in the way
the public IMDB rating is calculated vs the arithmetic mean. The public
IMDB rating is calculated using a secret formula to prevent review
bombing and is actually a weighted average. This reveals that using the
weighted mean is more powerful than the arithmetic mean and that the
weighted average used by IMDB is useful.

For budget, there is a quick slope upward at the beginning revealing
that a percentage increase in budget is more important that a dollar
amount increase. However, this should be taken with a grain of salt as
there are flaws to using budget as a prediction metric. Firstly, movies
have been made at all different times and budgets are not normalized for
inflation. This harms the predictive power of using budget. Moreover,
some movies do not have public budget information which is related to
their popularity. The mean IMDB count for a movie with a budget that is
not 0 is \ensuremath{4.3154913\times 10^{5}} while for movies with a
budget that is 0 the mean count is \ensuremath{3.8796132\times 10^{4}},
more than 10 times smaller.

\hypertarget{summary-and-discussion}{%
\section{Summary and discussion}\label{summary-and-discussion}}

Back to top

\hypertarget{what-are-the-main-conclusions-of-your-analysis-what-are-the-main-limitations-what-might-be-investigated-in-future-research}{%
\paragraph{What are the main conclusions of your analysis? What are the
main limitations? What might be investigated in future
research?}\label{what-are-the-main-conclusions-of-your-analysis-what-are-the-main-limitations-what-might-be-investigated-in-future-research}}

Ultimately, the model that I ended up liking the most was the BIC. This
model includes imdb\_rating, log(imdb\_count), and is\_john\_williams.
The model has an adjusted r squared of 0.4735121. This is very similar
to the GAM version of the model which includesa smoothed version version
of imdb\_rating and imdb\_count, a standard dummy variable of
is\_john\_williams and an interaction term between is\_john\_williams
and log(imdb\_count). This resulted in an adjusted r squared of
0.4749977. Since the simple MLR found by BIC is much simpler and has a
very similar r squared, it is the better choice for interpretability.

Interpretation. A movie with an IMDB rating of 0, that has been seen by
1 person, and does not have John Williams would be expected to have a
rating of -53.7527001. For each 1 unit increase in IMDB rating, holding
all else equal, my expected rating increases by -53.7527001. For each 1
unit increase in log(IMDB count), holding all else equal, my expected
rating increases by 10.9579689. If John Williams is credited in the
movie, holding all else equal, my expected rating increases by
2.5708082.

My largest conclusion in this project is that predicting my ratings if
very difficult and that adjusted r squared of around 0.47 are the best I
am going to do. I reached this conclusion since I fit many different
models and ended up with results consistently similar despite highly
different betas. Even with these varied betas, models consistently
overpredicted low values and undepredicted high values. This makes sense
considering each of the things that I am predicting based on are
aggregate metrics. When trying to turn these aggregate metrics back to
an individual prediction, the model hedges and predicts values generally
closer to the center. This allows the model to miss by less when it is
not particularly close.

\begin{itemize}
\tightlist
\item
  Fit BIC Outliers

  \begin{itemize}
  \tightlist
  \item
    Yogi Bear: 51.6646477
  \item
    Great Bear Rainforest: Land of the Spirit Bear: 33.4587349
  \item
    The Smurfs: 27.2795077
  \item
    Robots: 27.0933446
  \item
    Misha and the Wolves: 26.4569976
  \item
    Monty Python and the Holy Grail: -45.9879978
  \item
    The Godfather: Part II: -42.9105868
  \item
    The Secret Life of Pets: -40.8222339
  \item
    Flushed Away: -38.702369
  \item
    Shrek Forever After: -37.6574857
  \end{itemize}
\end{itemize}

\includegraphics[width=1\linewidth]{C:\Users\aweso\OneDrive\Documents\Stat 410\Project\index_files/figure-latex/unnamed-chunk-28-1}

\hypertarget{predictions}{%
\subsection{Predictions}\label{predictions}}

The movies being predicted are the most reviewed movies on IMDB that I
have not seen. In order they are Inglorious Basterds, The Silence of the
Lambs, Saving Private Ryan, The Departed, Shutter Island, The Green
Mile, Titanic, American Beauty, American History X, Braveheart, and The
Hottie \& the Nottie.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{most\_reviewed }\OtherTok{=} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{imdb\_rating=}\FunctionTok{c}\NormalTok{(}\FloatTok{8.3}\NormalTok{,}\FloatTok{8.6}\NormalTok{,}\FloatTok{8.6}\NormalTok{,}\FloatTok{8.5}\NormalTok{,}\FloatTok{8.2}\NormalTok{,}\FloatTok{8.6}\NormalTok{,}\FloatTok{7.9}\NormalTok{,}\FloatTok{8.4}\NormalTok{,}\FloatTok{8.5}\NormalTok{,}\FloatTok{8.4}\NormalTok{,}\FloatTok{1.9}\NormalTok{),}\AttributeTok{imdb\_count=}\FunctionTok{c}\NormalTok{(}\DecValTok{1389883}\NormalTok{,}\DecValTok{1381370}\NormalTok{,}\DecValTok{1342619}\NormalTok{,}\DecValTok{1282577}\NormalTok{,}\DecValTok{1253738}\NormalTok{,}\DecValTok{1253525}\NormalTok{,}\DecValTok{1130852}\NormalTok{,}\DecValTok{1130000}\NormalTok{,}\DecValTok{1094160}\NormalTok{,}\DecValTok{1014965}\NormalTok{,}\DecValTok{38184}\NormalTok{),}\AttributeTok{is\_john\_williams=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{))}
\NormalTok{predictions }\OtherTok{=} \FunctionTok{predict}\NormalTok{(fit\_bic, most\_reviewed, }\AttributeTok{interval=}\StringTok{"prediction"}\NormalTok{)}
\NormalTok{predictions}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##          fit       lwr       upr
## 1  73.561830  46.77416 100.34950
## 2  76.833426  50.03199 103.63487
## 3  85.345295  58.05852 112.63207
## 4  75.546864  48.75273 102.34100
## 5  72.201008  45.42008  98.98194
## 6  76.583759  49.78474 103.38278
## 7  68.648418  41.87802  95.41881
## 8  74.125465  47.33946 100.91147
## 9  75.138403  48.34807 101.92874
## 10 73.849454  47.06592 100.63299
## 11 -5.810091 -33.28446  21.66428
\end{verbatim}

These predictions are mostly reasonable but they do fall within very
large ranges. On the high end, the predictions get above 100 and on the
low end they get below 0. I feel confident that I would rate nearly all
of these movies within the given range; however, the ranges encompass
over half of the rating space. These ranges means the model must hedge
because it cannot continuously predict values of 90 for movies with
ranges between 63 and 117 because the range on the upper end is
impossible and the model will attempt to avoid it.

Overall, predicting my movie ratings is very difficult to make highly
accurate, but it is certainly possible to do much better than random
guessing, and with careful variable, it is possible to get a relatively
accurate model with high interpretability.

\hypertarget{references}{%
\section{References}\label{references}}

Back to top

\hypertarget{what-are-the-sources-for-the-data-and-any-additional-statistical-resources-that-you-used-to-support-your-analysis}{%
\paragraph{What are the sources for the data and any additional
statistical resources that you used to support your
analysis?}\label{what-are-the-sources-for-the-data-and-any-additional-statistical-resources-that-you-used-to-support-your-analysis}}

\begin{itemize}
\tightlist
\item
  Data sources:

  \begin{itemize}
  \tightlist
  \item
    \href{https://www.themoviedb.org/documentation/api}{TMDB API}
  \item
    \href{https://www.imdb.com/}{IMDB Website}
  \item
    \href{https://www.tradethisandthat.com/movies/}{Personal Movie
    Website}
  \end{itemize}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{from}\NormalTok{ django.core.management.base }\ImportTok{import}\NormalTok{ BaseCommand}
\ImportTok{from}\NormalTok{ movies.models }\ImportTok{import} \OperatorTok{*}
\ImportTok{import}\NormalTok{ csv, os}


\KeywordTok{class}\NormalTok{ Command(BaseCommand):}
    \BuiltInTok{help} \OperatorTok{=} \StringTok{\textquotesingle{}create full database from csv\textquotesingle{}}

    \KeywordTok{def}\NormalTok{ handle(}\VariableTok{self}\NormalTok{, }\OperatorTok{*}\NormalTok{args, }\OperatorTok{**}\NormalTok{options):}
\NormalTok{        FOLDER }\OperatorTok{=}\NormalTok{ os.path.dirname(os.path.abspath(}\VariableTok{\_\_file\_\_}\NormalTok{))}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/movie.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}franchise\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mpaa\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}metacritic\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_id\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}poster\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}runtime\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_date\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}recent\_watch\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}viewing\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_day\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_month\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}release\_year\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}revenue\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}budget\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}distance\_from\_rating\_average\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_rating\_percentile\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}tmdb\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}metacritic\_rating\_percentile\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genre\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}award\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}award\_count\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}production\_company\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}franchise\_name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mpaa\_name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genres\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}genre\_numbers\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}award\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}production\_company\_names\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_arithmetic\_mean\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_median\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_top\_1000\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_top\_1000\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_us\_rating\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_us\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}imdb\_not\_us\_rating\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}imdb\_not\_us\_count\textquotesingle{}}\NormalTok{]}
\NormalTok{            )}
\NormalTok{            genres }\OperatorTok{=}\NormalTok{ WatchInfo.objects.}\BuiltInTok{filter}\NormalTok{(watch\_info\_type}\OperatorTok{=}\StringTok{\textquotesingle{}Genre\textquotesingle{}}\NormalTok{)}
\NormalTok{            genre\_dict }\OperatorTok{=}\NormalTok{ \{genre: i }\ControlFlowTok{for}\NormalTok{ i, genre }\KeywordTok{in} \BuiltInTok{enumerate}\NormalTok{(genres)\}}
            \ControlFlowTok{for}\NormalTok{ movie }\KeywordTok{in}\NormalTok{ Movie.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [movie.uuid, (movie.franchise\_id }\ControlFlowTok{if}\NormalTok{ movie.franchise }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     (movie.mpaa\_rating\_id }\ControlFlowTok{if}\NormalTok{ movie.mpaa\_rating }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{), movie.imdb\_rating,}
\NormalTok{                     movie.metacritic\_rating, movie.my\_rating\_field, movie.tmdb\_id, movie.imdb\_id, movie.name,}
\NormalTok{                     movie.tmdb\_rating, movie.tmdb\_count, movie.poster, movie.runtime, movie.release\_date,}
\NormalTok{                     movie.recent\_watch, movie.viewing\_count, movie.release\_day.name, movie.release\_month.name,}
\NormalTok{                     movie.release\_year.name, movie.revenue, movie.budget, movie.distance\_from\_rating\_average,}
\NormalTok{                     movie.rating\_percentile, movie.imdb\_rating\_percentile, movie.tmdb\_rating\_percentile,}
\NormalTok{                     movie.metacritic\_rating\_percentile,}
\NormalTok{                     [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()], [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.awards.}\BuiltInTok{all}\NormalTok{()], movie.award\_count,}
\NormalTok{                     [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.production\_companies.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     (movie.franchise.name }\ControlFlowTok{if}\NormalTok{ movie.franchise }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     (movie.mpaa\_rating.name }\ControlFlowTok{if}\NormalTok{ movie.mpaa\_rating }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()], [genre\_dict[x] }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.genres.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.awards.}\BuiltInTok{all}\NormalTok{()],}
\NormalTok{                     [x.name }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ movie.production\_companies.}\BuiltInTok{all}\NormalTok{()], movie.imdb\_count, movie.imdb\_arithmetic\_mean,}
\NormalTok{                     movie.imdb\_median, movie.imdb\_top\_1000\_rating, movie.imdb\_top\_1000\_count, movie.imdb\_us\_rating,}
\NormalTok{                     movie.imdb\_us\_count, movie.imdb\_not\_us\_rating, movie.imdb\_not\_us\_count}
\NormalTok{                     ]}
\NormalTok{                )}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/place.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow([}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}city\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}state\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}country\textquotesingle{}}\NormalTok{])}
            \ControlFlowTok{for}\NormalTok{ place }\KeywordTok{in}\NormalTok{ Place.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow([place.uuid, place.city, place.state, place.country])}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/person.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}tmdb\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}main\_role\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}birth\_place\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}image\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}number\_of\_movies\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}total\_rating\textquotesingle{}}\NormalTok{,}
                 \StringTok{\textquotesingle{}credit\_weighted\_score\textquotesingle{}}\NormalTok{]}
\NormalTok{            )}
            \ControlFlowTok{for}\NormalTok{ person }\KeywordTok{in}\NormalTok{ Person.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow([person.uuid, person.tmdb\_id, person.name, person.main\_role,}
\NormalTok{                                     (person.birth\_place\_id }\ControlFlowTok{if}\NormalTok{ person.birth\_place }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{), person.image,}
\NormalTok{                                     person.number\_of\_movies\_field, person.total\_rating\_field,}
\NormalTok{                                     person.credit\_order\_weighted\_score\_field])}
        \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/watch\_info.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                  encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{            filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{            filewriter.writerow(}
\NormalTok{                [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}type\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_count\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}category\_average\textquotesingle{}}\NormalTok{, ]}
\NormalTok{            )}
            \ControlFlowTok{for}\NormalTok{ watch\_info }\KeywordTok{in}\NormalTok{ WatchInfo.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [watch\_info.uuid, watch\_info.name, watch\_info.watch\_info\_type, watch\_info.movie\_count,}
\NormalTok{                     watch\_info.category\_average])}
            \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/viewing.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                      encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{                filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_date\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_location\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_device\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}watch\_platform\_id\textquotesingle{}}\NormalTok{,}
                     \StringTok{\textquotesingle{}viewing\_people\_ids\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}review\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}my\_rating\textquotesingle{}}\NormalTok{]}
\NormalTok{                )}
                \ControlFlowTok{for}\NormalTok{ viewing }\KeywordTok{in}\NormalTok{ Viewing.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                    filewriter.writerow([viewing.uuid, viewing.movie\_id, viewing.watch\_date,}
\NormalTok{                                         (viewing.watch\_location\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_location }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         (viewing.watch\_device\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_device }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         (viewing.watch\_platform\_id }\ControlFlowTok{if}\NormalTok{ viewing.watch\_platform }\KeywordTok{is} \KeywordTok{not} \VariableTok{None} \ControlFlowTok{else} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{),}
\NormalTok{                                         [x.pk }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ viewing.people\_with.}\BuiltInTok{all}\NormalTok{()], viewing.review, viewing.my\_rating])}
            \ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(os.path.join(FOLDER, }\StringTok{\textquotesingle{}./csv/credit.csv\textquotesingle{}}\NormalTok{), }\StringTok{\textquotesingle{}w\textquotesingle{}}\NormalTok{,}
\NormalTok{                      encoding}\OperatorTok{=}\StringTok{\textquotesingle{}UTF8\textquotesingle{}}\NormalTok{, newline}\OperatorTok{=}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) }\ImportTok{as}\NormalTok{ csvfile:}
\NormalTok{                filewriter }\OperatorTok{=}\NormalTok{ csv.writer(csvfile)}
\NormalTok{                filewriter.writerow(}
\NormalTok{                    [}\StringTok{\textquotesingle{}uuid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}person\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}movie\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}department\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}character\_job\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}order\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}order\_score\textquotesingle{}}\NormalTok{,}
                     \StringTok{\textquotesingle{}order\_weighted\_score\textquotesingle{}}\NormalTok{]}
\NormalTok{                )}
                \ControlFlowTok{for}\NormalTok{ credit }\KeywordTok{in}\NormalTok{ Credit.objects.}\BuiltInTok{all}\NormalTok{():}
\NormalTok{                    filewriter.writerow(}
\NormalTok{                        [credit.uuid, credit.person\_id, credit.movie\_id, credit.department, credit.character\_job,}
\NormalTok{                         credit.order, credit.order\_score, credit.credit\_order\_weighted\_score])}
\end{Highlighting}
\end{Shaded}

\hypertarget{code-and-data}{%
\section{Code and data}\label{code-and-data}}

Back to top

\hypertarget{include-the-code-and-data-to-reproduce-your-analysis.-the-code-should-include-clear-comments-and-should-run-correctly-without-errors.}{%
\paragraph{Include the code and data to reproduce your analysis. The
code should include clear comments and should run correctly without
errors.}\label{include-the-code-and-data-to-reproduce-your-analysis.-the-code-should-include-clear-comments-and-should-run-correctly-without-errors.}}

Code and data included throughout.

\end{document}
